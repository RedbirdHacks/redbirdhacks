/*!CK:2351643562!*//*1422247166,*/

if (self.CavalryLogger) { CavalryLogger.start_js(["AHlF8"]); }

__d("GroupBrowseCompactHover",["CSS","Event","cx"],function(a,b,c,d,e,f,g,h,i){var j={handle_hover:function(k){h.listen(k,'mouseover',function(){g.addClass(k,"_4awp");});h.listen(k,'mouseout',function(){g.removeClass(k,"_4awp");});}};e.exports=j;},null);
__d("AsyncDOM",["CSS","DOM"],function(a,b,c,d,e,f,g,h){var i={invoke:function(j,k){for(var l=0;l<j.length;++l){var m=j[l],n=m[0],o=m[1],p=m[2],q=m[3],r=(p&&k)||null;if(o)r=h.scry(r||document.documentElement,o)[0];switch(n){case 'eval':(new Function(q)).apply(r);break;case 'hide':g.hide(r);break;case 'show':g.show(r);break;case 'setContent':h.setContent(r,q);break;case 'appendContent':h.appendContent(r,q);break;case 'prependContent':h.prependContent(r,q);break;case 'insertAfter':h.insertAfter(r,q);break;case 'insertBefore':h.insertBefore(r,q);break;case 'remove':h.remove(r);break;case 'replace':h.replace(r,q);break;default:}}}};e.exports=i;},null);
__d("MorePagerFetchOnScroll",["AsyncRequest","DOMQuery","Event","Style","Vector","throttle"],function(a,b,c,d,e,f,g,h,i,j,k,l){var m={};function n(o,p){"use strict";this._pager=o;this._offset=p||0;this._scrollParent=j.getScrollParent(o);this.setPagerInViewHandler(this._defaultPagerInViewHandler.bind(this));this._hasEventHandlers=false;if(!this.check()){this._scrollListener=i.listen(this._scrollParent,'scroll',l(function(){this.check();}.bind(this),50));this._clickListener=i.listen(this._scrollParent,'click',l(function(){this.check();}.bind(this),50));this._hasEventHandlers=true;}m[o.id]=this;}n.prototype.check=function(){"use strict";if(!h.contains(document.body,this._pager)){this.removeEventListeners();return true;}var o=k.getElementPosition(this._pager).y,p=this._scrollParent===window?k.getViewportDimensions().y:k.getElementDimensions(this._scrollParent).y,q=this._scrollParent===window?k.getScrollPosition().y+p:k.getElementPosition(this._scrollParent).y+p;if(o-this._offset<q){this._inViewHandler();this.removeEventListeners();return true;}return false;};n.prototype.removeEventListeners=function(){"use strict";if(this._hasEventHandlers){this._scrollListener&&this._scrollListener.remove();this._clickListener&&this._clickListener.remove();this._hasEventHandlers=false;}};n.prototype.setPagerInViewHandler=function(o){"use strict";this._inViewHandler=o;return this;};n.prototype._defaultPagerInViewHandler=function(){"use strict";var o=h.scry(this._pager,'a')[0];if(o)g.bootstrap(o.getAttribute('ajaxify')||o.href,o);};n.getInstance=function(o){"use strict";return m[o];};e.exports=n;},null);
__d("PluginLikebox",["AsyncDOM","AsyncRequest","CSS","DOMEvent","DOMEventListener","DOMQuery","MorePagerFetchOnScroll","PlatformWidgetEndpoint","Popup","copyProperties"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p){var q=3;function r(s,t,u){this.stream_id=s;this.force_wall=t;this.width=u;this.retries=0;this.load();k.add(l.find(document.body,'.pluginLikeboxStream'),'click',function(v){var w=new j(v),x=w.target.parentNode;if(i.hasClass(x,'text_exposed_link')){w.kill();i.addClass(l.find(x,'^.text_exposed_root'),'text_exposed');}var y=w.target.href?w.target:w.target.parentNode.href?w.target.parentNode:null;if(y&&y.pathname==='/sharer/sharer.php'){w.kill();o.open(y.href,670,340);}});}p(r.prototype,{load:function(s){new h().setMethod('GET').setURI(n.plugins('likebox','stream')).setData({id:this.stream_id,dom:s?'pluginLikeboxMoreStories':'pluginLikeboxStream',force_wall:this.force_wall,nobootload:1,inlinecss:1,max_timestamp:s,width:this.width}).setReadOnly(true).setErrorHandler(function(){}).setHandler(this.handleResponse.bind(this)).send();},handleResponse:function(s){if(s.inlinecss){var t=document.createElement('style');t.setAttribute("type","text/css");document.getElementsByTagName('head')[0].appendChild(t);if(t.styleSheet){t.styleSheet.cssText=s.inlinecss;}else t.appendChild(document.createTextNode(s.inlinecss));}g.invoke(s.domops);var u=l.scry(document.body,"#pluginLikeboxMoreStories a");if(!u.length)return;u=u[0];var v=function(){this.load(parseInt(u.getAttribute('data-timestamp'),10));var x=l.find(u.parentNode,'.uiMorePagerLoader');i.addClass(x,'uiMorePagerPrimary');i.removeClass(x,'uiMorePagerLoader');i.hide(u);}.bind(this);k.add(u,'click',function(x){new j(x).kill();v();});new m(u,0).setPagerInViewHandler(v);var w=parseInt(u.getAttribute('data-storycount'),10);if(w===0){if(this.retries<=q){this.retries++;v();}else i.hide(u);}else this.retries=0;return h.suppressOnloadToken;}});e.exports=r;},null);