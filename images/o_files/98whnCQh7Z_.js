/*!CK:2263290912!*//*1422251808,*/

if (self.CavalryLogger) { CavalryLogger.start_js(["V4h69"]); }

__d("TimelinePageLoadParam",[],function(a,b,c,d,e,f){e.exports={REQUEST_PARAM_NAME:"tipld",LAST_RANKED_UNIT_TIME:"rt",REPORT_UNIT_COUNT:"rc",STORY_UNIT_COUNT:"sc",VISIBLE_UNIT_COUNT:"vc"};},null);
__d("ComposerXEmptyAttachment",["ComposerXAttachment"],function(a,b,c,d,e,f,g){for(var h in g)if(g.hasOwnProperty(h))j[h]=g[h];var i=g===null?null:g.prototype;j.prototype=Object.create(i);j.prototype.constructor=j;j.__superConstructor__=g;function j(k,l){"use strict";g.call(this);this._root=k;if(l)this.attachmentClassName=l;}j.prototype.getRoot=function(){"use strict";return this._root;};e.exports=j;},null);
__d("ComposerXDatepickerIconReset",["CSS","cx"],function(a,b,c,d,e,f,g,h){function i(j){g.removeClass(j.element,"_4_na");g.removeClass(j.element,"_509o");}e.exports=i;},null);
__d("TimelineContextItemLogger",["BanzaiLogger","Event","FBJSON","Parent","Run","cx","tidyEvent"],function(a,b,c,d,e,f,g,h,i,j,k,l,m){var n='MTimelineXContextItemsLoggerConfig',o='impression',p='click',q='context_item_url',r='event',s="_md0",t=[];function u(w,x,y){var z=i.parse(w.getAttribute('data-store'));z[r]=x;if(y)z[q]=y;g.log(n,z);}var v={logWhenVisible:function(w){if(!t.length)k.onLeave(function(){t=[];});t.push(w);},logWhenClicked:function(w){m(h.listen(w,'click',function(x){var y=x.getTarget();if(y.nodeName!=='A')return;var z=j.byClass(y,s);z&&u(z,p,y.href);}));},listenToExpand:function(w){m(w.addListener('expanded',function(){while(t.length)u(t.pop(),o);}));}};e.exports=v;},null);
__d("TimelineSecondaryColumnUnitList",["CSS","DOM","Event","Run","csx","cx","mixInEventEmitter"],function(a,b,c,d,e,f,g,h,i,j,k,l,m){var n=30;function o(p,q){"use strict";var r=i.listen(q,'click',function(){this.$TimelineSecondaryColumnUnitList0=h.scry(p,"._16f_");this.$TimelineSecondaryColumnUnitList1();h.remove(q);this.emit('expanded');}.bind(this));j.onLeave(r.remove.bind(r));}o.prototype.$TimelineSecondaryColumnUnitList1=function(){"use strict";if(!this.$TimelineSecondaryColumnUnitList0.length)return;g.removeClass(this.$TimelineSecondaryColumnUnitList0.shift(),"_16f_");setTimeout(this.$TimelineSecondaryColumnUnitList1.bind(this),n);};m(o,{expanded:true});e.exports=o;},null);
__d("TimelineCapsule",["Arbiter","CSS","DataStore","DOM","DOMQuery","DOMScroll","Parent","TimelineConstants","TimelineLegacySections","UserAgent_DEPRECATED","Vector","$","createArrayFromMixed","csx","isEmpty","queryThenMutateDOM"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v){var w=(function(){var x=45,y=15,z={},aa={};function ba(oa){return h.hasClass(oa,'fbTimelineBalancer');}function ca(oa){return oa.getAttribute('data-spine');}function da(oa){return h.hasClass(oa,'placeholderUnit');}function ea(oa,pa){if(pa)return (i.get(n.DS_SIDEORG,oa.id)||oa.getAttribute('data-side'));return oa.getAttribute('data-side');}function fa(oa,pa){i.set(n.DS_SIDEORG,oa.id,ea(oa,true));oa.setAttribute('data-side',pa);}function ga(oa){return oa.getAttribute('data-size');}function ha(oa){if(h.hasClass(oa,'fbTimelineOneColumn')&&oa.prevSibling&&h.hasClass(oa.prevSibling,'fbTimelineOneColumn'))return y*2;if(h.hasClass(oa,'fbTimelineIndeterminateContent'))return 0;return y;}function ia(oa,pa){var qa=0;if(h.shown(oa)&&!h.hasClass(oa,'placeholderUnit'))qa=oa.offsetHeight+ha(oa);i.set(n.DS_HEIGHT,oa.id,parseInt(qa,10));}function ja(oa){var pa=i.get(n.DS_HEIGHT,oa.id,null);return pa;}function ka(oa,pa){if(ga(pa)=='2'){return 0;}else if(ea(pa)=='r'){return oa+ja(pa);}else return oa-ja(pa);}function la(oa){k.scry(oa,"._3ram").forEach(function(pa){var qa=pa.getAttribute('data-endmarker'),ra=pa.getAttribute('data-pageindex'),sa=function(){if(!pa.parentNode)return;i.set(n.DS_LOADED,oa.id,ra);j.remove(pa);g.inform(n.SECTION_FULLY_LOADED,{scrubberKey:qa,pageIndex:ra,capsuleID:oa.id,childCount:oa.childNodes.length});};if(o.get(qa)){sa();}else var ta=g.subscribe(n.SECTION_REGISTERED,function(ua,va){if(va.scrubberKey===qa){sa();ta.unsubscribe();}});});g.inform('TimelineCapsule/balanced',{capsule:oa});}function ma(oa){if(u(z[oa.id]))return;var pa=ba(oa)?oa.firstChild:oa,qa=pa.childNodes.length,ra={},sa={},ta,ua=y,va=y,wa,xa=[];for(var ya=0;ya<qa;ya++){ta=pa.childNodes[ya];if(h.hasClass(ta,'fbTimelineUnit')){wa=k.scry(ta,'div.timelineUnitContainer')[0];if(wa)sa[ta.id]=wa.getAttribute('data-time');if(!da(ta)&&h.shown(ta)){if(ga(ta)=='2'){ra[ta.id]=Math.max(ua,va);ua=va=ra[ta.id]+ja(ta);}else if(ea(ta)=='r'){ra[ta.id]=va;va+=ja(ta);}else{ra[ta.id]=ua;ua+=ja(ta);}if(ea(ta,true)=='l'||ga(ta)=='2')xa.push(ta.id);}}}for(ya=0;ya<xa.length-1;++ya){var za=xa[ya],ab=xa[ya+1],bb=ra[za]+x,cb=ra[ab];for(var db in z[oa.id]){if(bb>cb)break;var eb=z[oa.id][db];if(h.shown(eb))continue;if(sa[db]<=sa[za]&&sa[db]>sa[ab]){eb.style.top=bb+"px";bb+=x;h.show(eb);}}}}function na(oa,pa){var qa=m.byAttribute(oa,'data-size');if(qa){if(h.hasClass(oa.parentNode,'timelineReportContent')){pa(oa);}else pa(qa);w.balanceCapsule(m.byClass(qa,'fbTimelineCapsule'));}}return {removeUnit:function(oa){na(oa,function(pa){j.remove(pa);});},removeUnitWithID:function(oa){w.removeUnit(r(oa));},hideUnit:function(oa){na(oa,function(pa){h.addClass(pa,'fbTimelineColumnHidden');});},undoHideUnit:function(oa,pa){j.remove(m.byClass(pa,'hiddenText'));na(oa,function(qa){h.removeClass(qa,'fbTimelineColumnHidden');});},unplacehold:function(oa){var pa=r(oa);pa.style.top=null;h.removeClass(pa,'visiblePlaceholder');h.removeClass(pa,'placeholder');var qa=m.byClass(pa,'fbTimelineCapsule');delete z[qa.id][oa];w.balanceCapsule(qa);},scrollToCapsule:function(oa){if(!aa.hasOwnProperty(oa.id)){var pa=q.getElementPosition(oa.parentNode);l.scrollTo(new q(q.getScrollPosition().x,pa.y-n.SCROLL_TO_OFFSET,'document'));aa[oa.id]=true;}},balanceCapsuleFromChild:function(oa,pa){w.balanceCapsule(m.byClass(oa,'fbTimelineCapsule'),pa);},balanceCapsuleDeferred:function(oa,pa){setTimeout(w.balanceCapsule.bind(null,oa,pa),0);},balanceCapsule:function(oa,pa){if(!oa||!oa.childNodes)return;var qa=0,ra,sa=document.createDocumentFragment(),ta=[],ua=[],va=[],wa=false,xa=pa&&pa.heights_action;if(pa&&pa.tail_balance)i.set(n.DS_TAILBALANCE,oa.id,pa.tail_balance);if(p.chrome()||p.webkit())h.toggleClass(oa,'webkitFix');for(var ya=0;ya<oa.childNodes.length;ya++){ra=oa.childNodes[ya];if(ca(ra)){continue;}else if(ba(ra)){s(ra.firstChild.childNodes).forEach(function(gb){ia(gb,xa);});continue;}ia(ra,xa);if(ea(ra,true)=='r'){ua.push(ra);}else ta.push(ra);va.push(ra);if(ga(ra)!='2')if((qa>0&&ea(ra)=='r')||(qa<0&&ea(ra)=='l'))wa=true;qa=ka(qa,ra);}var za=[],ab=[],bb=[];k.scry(oa,'li.fbTimelineBalancer').forEach(function(gb){var hb=s(gb.firstChild.childNodes);if(gb.getAttribute('data-nonunits')){bb=bb.concat(hb);}else if(ea(gb)=='left'){za=za.concat(hb);}else if(ea(gb)=='right')ab=ab.concat(hb);});if(wa){oa.style.minHeight=oa.offsetHeight;ta.forEach(function(gb){if(ga(gb)!='2')fa(gb,'l');});ua.forEach(function(gb){if(ga(gb)!='2')fa(gb,'r');});var cb=j.create('li',{className:'fbTimelineBalancer'},j.create('ol',null,ta));cb.setAttribute('data-side','left');j.prependContent(oa,cb);za=ta.concat(za);var db=j.create('li',{className:'fbTimelineBalancer'},j.create('ol',null,ua));db.setAttribute('data-side','right');j.prependContent(oa,db);ab=ua.concat(ab);qa=0;}while(bb.length)sa.appendChild(bb.shift());while((qa>=0&&za.length)||(qa<0&&ab.length)){if(qa>=0){ra=za.shift();}else ra=ab.shift();sa.appendChild(ra);qa=ka(qa,ra);}oa.appendChild(sa);k.scry(oa,'li.fbTimelineBalancer').forEach(function(gb){if(!gb.firstChild.childNodes.length)j.remove(gb);});var eb=(pa&&pa.tail_balance)||i.get(n.DS_TAILBALANCE,oa.id);if(eb)qa=w.tailBalance(oa,qa,eb);if(wa){va.forEach(function(gb){if(gb.parentNode!==oa){oa.appendChild(gb);qa=ka(qa,gb);}});oa.style.minHeight=null;}var fb=m.byClass(oa,'fbTimelineSection');if(fb)i.set(n.DS_COLUMN_HEIGHT_DIFFERENTIAL,fb.id,qa);z[oa.id]={};k.scry(oa,'li.placeholderUnit').forEach(function(gb){z[oa.id][gb.id]=gb;});ma(oa);la(oa);},tailBalance:function(oa,pa,qa){if(!oa)return pa;var ra=[],sa=[],ta=[],ua=[];k.scry(oa,'li.fbTimelineBalancer').forEach(function(wa){var xa=s(wa.firstChild.childNodes);if(wa.getAttribute('data-nonunits')){ua=ua.concat(xa);}else if(ea(wa)=='left'){sa=sa.concat(xa);}else if(ea(wa)=='right')ta=ta.concat(xa);ra=ra.concat(xa);});if((qa==n.FIXED_SIDE_RIGHT&&sa.length)||(qa==n.FIXED_SIDE_LEFT&&ta.length))return pa;var va=document.createDocumentFragment();if(ra)while(ra.length){if(qa!=n.FIXED_SIDE_NONE)if(ga(ra[0])!='2')if(pa>=0){fa(ra[0],'l');}else fa(ra[0],'r');pa=ka(pa,ra[0]);va.appendChild(ra.shift());}oa.appendChild(va);k.scry(oa,'li.fbTimelineBalancer').forEach(function(wa){if(!wa.firstChild.childNodes.length)j.remove(wa);});return pa;},loadTwoColumnUnits:function(oa){var pa=r(oa);v(function(){var qa=m.byClass(pa,'fbTimelineSection');if(qa){var ra=k.find(pa,"._3rbf"),sa=k.find(pa,"._3rbh"),ta=sa.offsetHeight-ra.offsetHeight;i.set(n.DS_COLUMN_HEIGHT_DIFFERENTIAL,qa.id,ta);}},la.bind(null,pa));}};})();e.exports=a.TimelineCapsule||w;},null);
__d("TimelineCapsuleUtilities",["CSS"],function(a,b,c,d,e,f,g){var h={setFirstUnit:function(i){var j=true;for(var k=0;k<i.childNodes.length;++k){var l=i.childNodes[k];if(l.id.indexOf('tl_unit_')===0)if(j){j=false;g.addClass(l,'firstUnit');}else{g.removeClass(l,'firstUnit');break;}}}};e.exports=h;},null);
__d("TimelineComposer",["Arbiter","Bootloader","ComposerXMarauderLogger","ComposerXStore","CSS","DOM","Parent","Run","TimelineCapsule","TimelineCapsuleUtilities","$","getObjectValues","goURI"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s){var t;function u(){i.logCompleted(t.id);}function v(x){if(x.hidePost){u();return;}if(x.redirect){var y=j.getAllForComposer(t.id);r(y).forEach(function(aa){if(aa.reset)aa.reset(aa);});s(x.redirect);u();return;}if(!x.streamStory){window.location.reload();return;}if(x.backdatedTime){h.loadModules(["TimelineStoryPublisher"],function(aa){aa.publish(x);});u();return;}var z=w.renderCapsuleBasedStory(t,x.streamStory);g.inform('TimelineComposer/on_after_publish',z,g.BEHAVIOR_PERSISTENT);u();}var w={init:function(x){t=q(x);var y=g.subscribe('composer/publish',function(event,z){if(z.composer_id===t.id)v(z);});n.onLeave(y.unsubscribe.bind(y));},renderCapsuleBasedStory:function(x,y){var z=m.byClass(x,'fbTimelineCapsule');if(!z)return;var aa=m.byClass(x,'fbTimelineUnit'),ba=aa.nextSibling;if(ba&&ba.getAttribute('data-spine'))aa=aa.nextSibling;l.insertAfter(aa,y);var ca=y;if(k.hasClass(y,'fbTimelineUnit'))ca=l.find(y,'div.timelineUnitContainer');h.loadModules(["Animation"],function(da){new da(ca).from('backgroundColor','#fff8dd').to('backgroundColor','#fff').duration(2000).ease(da.ease.both).go();});p.setFirstUnit(z);o.balanceCapsule(z);return y;}};e.exports=a.TimelineComposer||w;},null);
__d("TimelineUnitSelector",["DOMQuery","csx"],function(a,b,c,d,e,f,g,h){var i={getUnitsWithTime:function(j){return g.scry(j,"._5jmm[data-time]");}};e.exports=i;},null);
__d("TimelineComposerUtilities",["Event","Arbiter","Bootloader","CSS","DOM","DOMQuery","Parent","TimelineUnitSelector","Vector","cx"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p){var q=86400*31,r=86400000,s={listenToSetEstimatedDate:function(t,u){return h.subscribe('ComposerXTimelineTagger/init',function(v,w){if(l.contains(t,w.datePickerElement)){s.setEstimatedDate(w.datePickerInstance,u());w.composerTimelineTagger.switchToTagger('date');}});},listenToPublish:function(t,u){if(t.root)t=t.root;return h.subscribe('composer/publish',function(event,v){if(v.composer_id===t.id)i.loadModules(["TimelineStoryPublisher"],function(w){w.publish(v);u&&u();});});},listenToAnotherComposerOpen:function(t,u){return h.subscribe('composer/mutate',function(v,w){if(w!==t)u();});},listenToCancel:function(t,u){return g.listen(t,'click',function(event){if(m.byClass(event.getTarget(),"_306"))u();});},setEstimatedDate:function(t,u){var v,w;if(u&&j.hasClass(u,'fbTimelineCapsule')){v=u.getAttribute('data-start');w=u.getAttribute('data-end');if(v&&w){var x=new Date(w*1000),y=new Date();if(x>y){t.setDate(y.getFullYear(),y.getMonth()+1,y.getDate());}else if(w-v>2*q){t.setDate(x.getFullYear());}else t.setDate(x.getFullYear(),x.getMonth()+1);}return;}var z=m.byClass(u,'fbTimelineCapsule');if(z){v=z.getAttribute('data-start');w=z.getAttribute('data-end');var aa=o.getElementPosition(u).y,ba=[w,null],ca=[v,null],da=n.getUnitsWithTime(z);for(var ea=0;ea<da.length;ea++){var fa=da[ea],ga=k.scry(fa.parentNode,'.spinePointer')[0];if(!ga)continue;var ha=o.getElementPosition(ga).y;if(ha<=aa){if(!ba[1]||ha>ba[1])ba=[fa.getAttribute('data-time'),ha];}else if(!ca[1]||ha<ca[1])ca=[fa.getAttribute('data-time'),ha];}if(ba[0]!==null&&ca[0]!==null){var ia=Math.round((parseInt(ba[0],10)+parseInt(ca[0],10))/2)*1000;ia=Math.min(new Date()-r,ia);t.setDateWithTimestamp(ia);}}}};e.exports=s;},null);
__d("TimelineSectionStore",["TimelinePageLoadParam","KeyedCallbackManager"],function(a,b,c,d,e,f,g,h){var i=new h(),j='num_reports_tried',k='num_reports_visible',l='more_pager_data',m={getDataToLoadNextSegment:function(n,o){i.executeOrEnqueue(n,function(p){this._mergeReportsAndStoriesDataCallback(p,o);}.bind(this));},setReportsData:function(n,o,p){var q=i.getResource(n);if(!q)q={};q[j]=o;q[k]=p;i.setResource(n,q);},setStoriesData:function(n,o){var p=i.getResource(n);if(!p)p={};p[l]=o;i.setResource(n,p);},_mergeReportsAndStoriesDataCallback:function(n,o){var p=n[l];if(!p.hasOwnProperty(g.REQUEST_PARAM_NAME))p[g.REQUEST_PARAM_NAME]={};p[g.REQUEST_PARAM_NAME][g.REPORT_UNIT_COUNT]=n[j];var q=p[g.REQUEST_PARAM_NAME][g.VISIBLE_UNIT_COUNT];p[g.REQUEST_PARAM_NAME][g.VISIBLE_UNIT_COUNT]=q+n[k];o(p);}};e.exports=m;},null);
__d("TimelineParallelColumnPager.react",["Link.react","React","TimelineSectionStore","UIPagelet","LoadingIndicator.react","OnVisible.react"],function(a,b,c,d,e,f,g,h,i,j,k,l){var m=h.PropTypes,n={},o={STATE_WAITING_FOR_ONVISIBLE:'state_waiting_for_onvisible',STATE_LOADING_INDICATOR:'state_loading_indicator',STATE_LINKIFIED:'state_linkified'},p=h.createClass({displayName:"TimelineParallelColumnPager",propTypes:{loadMoreLabel:m.string.isRequired,sectionKey:m.string.isRequired,rootID:m.string.isRequired},componentWillMount:function(){n[this.props.sectionKey]=this;},getInitialState:function(){return {pagerState:o.STATE_WAITING_FOR_ONVISIBLE};},render:function(){if(this.state.pagerState===o.STATE_LOADING_INDICATOR)return h.createElement(k,{size:"small",color:"white"});if(this.state.pagerState===o.STATE_LINKIFIED)return (h.createElement(g,{onClick:this._loadNextSegment},this.props.loadMoreLabel));return (h.createElement(l,{onVisible:this._loadNextSegment},h.createElement("div",null)));},statics:{getInstance:function(q){return n[q];}},removeOnVisible:function(){this.setState({pagerState:o.STATE_LINKIFIED});},_loadNextSegment:function(){this.setState({pagerState:o.STATE_LOADING_INDICATOR});i.getDataToLoadNextSegment(this.props.sectionKey,this._nextSegmentDataHandler);},_nextSegmentDataHandler:function(q){var r={usePipe:true,jsNonblock:true,buffer:1000,constHeight:true,target_id:q.unit_container_id,crossPage:true};j.loadFromEndpoint('ProfileTimelineSectionPagelet',this.props.rootID,q,r);}});e.exports=p;},null);
__d("TimelineContentLoader",["Arbiter","CSS","DOM","DOMScroll","Event","OnVisible","Parent","ScrollingPager","TimelineComponentKeys","TimelineConstants","TimelineController","TimelineDOMID","TimelineLegacySections","TimelineParallelColumnPager.react","TimelineSmartInsert","UIPagelet","Vector","$","arrayContains","copyProperties","createArrayFromMixed","csx","debounce","ge","getElementText","fbt","userAction"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,aa,ba,ca,da,ea,fa,ga){var ha=false,ia,ja=null,ka={},la=[],ma={},na=[],oa={},pa={},qa={},ra={},sa=null,ta=false,ua=null;function va(eb,fb,gb,hb,ib){"use strict";this.node=eb;this.loaded=hb;this.canScrollLoad=true;this.canUnload=fb!=db.RECENT;this.scrubberKey=fb;this.historicUnitCount=ib;this._pageletLoadData=gb;this._expandPageletLoadData={};this.rightColumnFinished=false;}va.prototype.load=function(eb,fb){"use strict";if(this.loaded)return;var gb=this._pageletLoadData;g.inform(p.SECTION_LOADING,{data:gb,scrubberKey:this.scrubberKey});this.loaded=true;h.removeClass(this.node,'fbTimelineTimePeriodUnexpanded');h.removeClass(this.node,'fbTimelineTimePeriodSuppressed');var hb='ProfileTimelineSectionPagelet',ib=this.scrubberKey==db.WAY_BACK;if(ib)hb='ProfileTimelineRemainingYearsPagelet';gb.highlight_unit_data=eb;gb.parent_key=this.parentKey;gb.force_no_friend_activity=ta;h.addClass(this.node,'fbTimelineSectionLoading');this.canScrollLoad=false;var jb=null;if(fb){this.node.style.minHeight=window.innerHeight+'px';jb=function(){this.node.style.minHeight='';ab(this.scrubberKey);}.bind(this);}qa[this.scrubberKey]=v.loadFromEndpoint(hb,this.node.id,gb,{usePipe:true,jsNonblock:true,constHeight:true,append:false,finallyHandler:jb});bb();};va.prototype.preload=function(){"use strict";h.addClass(this.node,'fbTimelineTimePeriodSuppressed');h.removeClass(this.node,'fbTimelineTimePeriodUnexpanded');var eb=i.find(this.node,'span.sectionLabel');if(eb.getAttribute('data-original-label')){i.setContent(eb,eb.getAttribute('data-original-label'));eb.removeAttribute('data-original-label');}};va.prototype.unload=function(){"use strict";if(!this.loaded||!this.canUnload)return;this.loaded=false;qa[this.scrubberKey]&&qa[this.scrubberKey].cancel();h.addClass(this.node,'fbTimelineTimePeriodUnexpanded');h.removeClass(this.node,'fbTimelineTimePeriodSuppressed');if(this.node.nextSibling&&h.hasClass(this.node.nextSibling,'fbTimelineSection')){i.setContent(this.node,this.node.nextSibling);h.show(this.node.firstChild);}else i.empty(this.node);this.deactivateScrollLoad();};va.prototype.activateScrollLoad=function(){"use strict";this.canScrollLoad=true;h.removeClass(this.node,'fbTimelineTimePeriodSuppressed');h.addClass(this.node,'fbTimelineTimePeriodUnexpanded');pa[this.scrubberKey]&&pa[this.scrubberKey].reset();};va.prototype.deactivateScrollLoad=function(){"use strict";if(!this.loaded){this.canScrollLoad=false;h.removeClass(this.node,'fbTimelineTimePeriodUnexpanded');h.addClass(this.node,'fbTimelineTimePeriodSuppressed');pa[this.scrubberKey]&&pa[this.scrubberKey].remove();}};va.prototype.setExpandLoadData=function(eb){"use strict";this._expandPageletLoadData=eb;return this;};va.prototype.appendData=function(eb){"use strict";z(this._pageleLoadData,eb);return this;};va.prototype.expandSubSections=function(){"use strict";if(this.subSections.length)db.navigateToSection(this.subSections[0].scrubberKey);};va.prototype.expand=function(eb){"use strict";if(!this.loaded)return;sa.add_event('expand_'+this.scrubberKey);var fb=i.find(this.node,'.fbTimelineSectionExpander');h.addClass(fb.firstChild,'async_saving');eb&&h.addClass(eb,'async_saving');db.navigateToSection(this.scrubberKey);i.scry(this.node,'.fbTimelineCapsule').forEach(i.remove);this._expandPageletLoadData.new_expand=true;qa[this.scrubberKey]&&qa[this.scrubberKey].cancel();qa[this.scrubberKey]=v.loadFromEndpoint('ProfileTimelineSectionPagelet',fb.id,this._expandPageletLoadData,{usePipe:true,jsNonblock:true,constHeight:true});};va.prototype.isPermalinkPeriod=function(){"use strict";return this._pageletLoadData.is_permalink_period;};function wa(){if(ha)return;q.register(o.CONTENT,db);sa=ga('timeline').uai('init','scrubber',false);ha=true;}var xa=ca(function(eb,fb,gb){var hb=s.get(eb).historicUnitCount;fb-=hb;gb-=1;if(hb==-1||gb<=0||fb<0)return;var ib=db.getNextSectionKey(eb);if(ib){s.get(ib).load();xa(ib,fb,gb);}},500);function ya(eb,fb,gb,hb){var ib=db.getNextSectionKey(fb);if(ib){pa[ib]=new l(eb,za.bind(null,ib),false,gb||1000);}else if(fb!==db.WAY_BACK){hb=hb?hb:0;if(hb>80)return null;setTimeout(ya.bind(null,eb,fb,gb,hb+1),250);}}function za(eb){var fb=s.get(eb);if(fb&&fb.canScrollLoad){sa.add_event("scroll_load_"+eb);fb.load();if(ua)xa(eb,ua.required_units,ua.max_parallelism);}}function ab(eb){var fb=pa[eb];if(fb){fb.remove();pa[eb]=null;i.remove(fb.getElement());}}function bb(){var eb,fb,gb=false;for(var hb=0;hb<la.length;hb++){var ib=la[hb];if(!ib)continue;var jb=s.get(ib);if(jb&&(jb.canScrollLoad||jb.loaded)){if(!jb.loaded){h.removeClass(jb.node,'fbTimelineTimePeriodSuppressed');h.addClass(jb.node,'fbTimelineTimePeriodUnexpanded');}if(eb&&fb){cb(eb,fb);if(gb)eb.deactivateScrollLoad();gb=true;}eb=null;fb=null;continue;}else if(eb){fb=jb;jb.deactivateScrollLoad();}else{eb=jb;if(gb)jb.activateScrollLoad();}h.removeClass(jb.node,'fbTimelineTimePeriodSuppressed');h.addClass(jb.node,'fbTimelineTimePeriodUnexpanded');}}function cb(eb,fb){h.removeClass(fb.node,'fbTimelineTimePeriodUnexpanded');h.addClass(fb.node,'fbTimelineTimePeriodSuppressed');var gb=i.find(eb.node,'span.sectionLabel'),hb=i.find(fb.node,'span.sectionLabel');if(!hb.getAttribute('data-original-label'))hb.setAttribute('data-original-label',ea(hb));if(gb.getAttribute('data-month')&&hb.getAttribute('data-month')&&gb.getAttribute('data-year')==hb.getAttribute('data-year')){i.setContent(hb,fa._("Show {month1} - {month2} {year}",[fa.param("month1",hb.getAttribute('data-month')),fa.param("month2",gb.getAttribute('data-month')),fa.param("year",gb.getAttribute('data-year'))]));}else if(gb.getAttribute('data-year')!==hb.getAttribute('data-year')){i.setContent(hb,fa._("Show {year1} - {year2}",[fa.param("year1",hb.getAttribute('data-year')),fa.param("year2",gb.getAttribute('data-year'))]));}else i.setContent(hb,fa._("Show {year}",[fa.param("year",hb.getAttribute('data-year'))]));}var db={WAY_BACK:'way_back',RECENT:'recent',HEADER_SCROLL_CUTOFF:80,CURRENT_SECTION_OFFSET:150,FOOTER_HEIGHT:60,registerTimePeriod:function(eb,fb,gb,hb,ib,jb,kb){wa();if(y(na,fb))return;if(ma)z(gb,ma);var lb=new va(eb,fb,gb,hb,kb);if(!ib){la[jb]=fb;ka[fb]=true;}else{lb.parentKey=ib;s.get(ib).subSections=s.get(ib).subSections||[];s.get(ib).subSections[jb]=lb;}s.set(fb,lb);db.checkCurrentSectionChange();g.inform(p.SECTION_REGISTERED,{scrubberKey:fb,period:lb});},reset:function(){for(var eb in pa)pa[eb]&&pa[eb].remove();for(var fb in qa)qa[fb]&&qa[fb].cancel();for(var gb in ra){ra[gb].unsubscribe();delete ra[gb];}ia&&ia.unsubscribe();ia=null;s.removeAll();ja=null;ka={};la=[];ma={};na=[];oa={};pa={};qa={};sa=null;ta=false;ha=false;},checkCurrentSectionChange:function(){var eb=db.getCurrentSection(),fb=ja&&ja.scrubberKey;if(eb&&eb.scrubberKey!==fb&&!eb.isPermalinkPeriod()){ja=eb;var gb=eb.scrubberKey,hb=eb.parentKey;if(!hb){hb=gb;gb=null;}q.sectionHasChanged(hb,gb);}},setParallelLoadConfig:function(eb){ua=eb;},getCurrentSection:function(){var eb={},fb=s.getAll();for(var gb in fb){var hb=fb[gb];if(!hb.loaded||oa[hb.scrubberKey])continue;var ib=w.getElementPosition(hb.node,'viewport').y;if(hb.scrubberKey=='recent')ib--;if(ib<db.CURRENT_SECTION_OFFSET)eb[ib]=hb;}var jb=Math.max.apply(null,Object.keys(eb)),kb=jb==-Infinity;if(!kb){return eb[jb];}else if(la[0])return s.get(la[0]);return null;},capsuleForCurrentSection:function(){var eb=db.getCurrentSection();return eb&&i.scry(eb.node,'.fbTimelineCapsule')[0];},enableScrollLoad:function(eb,fb,gb,hb){eb=x(eb);var ib=m.byClass(eb,'fbTimelineSection')||eb.parentNode,jb=ib&&i.scry(ib,'.fbTimelineCapsule')[0];if(!jb)return;if(gb===null){ya(eb,fb,hb);}else q.runOnceWhenSectionFullyLoaded(ya.bind(null,eb,fb,hb),fb,gb);},expandSectionOnClick:function(eb,fb){k.listen(eb,'click',function(gb){gb.prevent();s.get(fb).expand();});},expandSubSectionsOnClick:function(eb,fb){k.listen(eb,'click',function(gb){gb.prevent();s.get(fb).expandSubSections();});},getNextSectionKey:function(eb){for(var fb=0;fb<la.length-1;fb++)if(la[fb]==eb){while(fb<la.length-1&&!la[fb+1])fb++;return la[fb+1];}var gb=s.get(eb);if(!gb||!gb.parentKey)return;var hb=s.get(gb.parentKey);if(!hb)return;for(var ib=0;ib<hb.subSections.length-1;ib++)if(hb.subSections[ib].scrubberKey==eb)return hb.subSections[ib+1].scrubberKey;},hideSection:function(eb){var fb=s.get(eb);fb&&h.hide(i.find(fb.node,'.fbTimelineSection'));var gb=q.getCurrentScrubber();if(gb){var hb=null;if(!ka[eb]){var ib=fb.parentKey;hb=q.getCurrentScrubber().getSubnav(ib,eb);}else hb=q.getCurrentScrubber().getNav(eb);hb&&h.hide(hb);}var jb=q.getCurrentStickyHeaderNav();jb&&jb.removeTimePeriod(eb);oa[eb]=true;},loadSectionOnClick:function(eb,fb){k.listen(eb,'click',function(gb){gb.prevent();s.get(fb).load();});},removeSection:function(eb){for(var fb in la)if(la[fb]==eb){la[fb]=null;break;}s.remove(eb);delete ka[eb];if(eb in pa){pa[eb].remove();delete pa[eb];}var gb=q.getCurrentStickyHeaderNav();gb&&gb.removeTimePeriod(eb);na.push(eb);},removeSectionParent:function(eb){i.remove(x(eb).parentNode);},navigateToSection:function(eb,fb,gb){sa.add_event("nav_"+eb);fb=!!fb;var hb=eb,ib=s.get(eb);if(!ib)return;if(!ib.loaded){u.enable();i.scry(x(r.TAB_CONTENT),'.fbTimelineShowOlderSections').forEach(i.remove);}if(!ka[eb]){if(!ib.loaded)ib.node.style.minHeight=w.getViewportDimensions().y+'px';var jb=g.subscribe(p.SECTION_FULLY_LOADED,function(rb,sb){if(sb.scrubberKey===eb){ib.node.style.minHeight='';jb.unsubscribe();}});hb=ib.parentKey;var kb=s.get(hb).node;if(!h.hasClass(kb,'fbTimelineSectionExpanded')){j.scrollTo(kb,0);h.addClass(kb,'fbTimelineSectionExpanded');i.scry(kb,'.fbTimelineCapsule').forEach(i.remove);i.scry(kb,'div.fbTimelineSectionExpandPager').forEach(i.remove);i.scry(kb,'div.fbTimelineContentHeader').forEach(i.remove);i.scry(kb,"._5vf").forEach(function(rb){if(!rb.getAttribute('data-subsection'))i.remove(rb);});}var lb=db.getNextSectionKey(hb);if(lb&&pa[lb])pa[lb].setBuffer(0);}for(var mb=0;mb<la.length;mb++){var nb=la[mb];if(!nb)continue;if(nb==hb)break;s.get(nb).deactivateScrollLoad();i.scry(x(r.TAB_CONTENT),'.fbTimelineSectionExpandPager').forEach(function(rb){var sb=n.getInstance(rb.id);sb&&sb.removeOnVisible();});var ob=t.getInstance(nb);ob&&ob.removeOnVisible();}ib.load(gb,true);bb();var pb=w.getScrollPosition().x,qb=w.getElementPosition(ib.node).y;if(!fb)j.scrollTo(new w(pb,qb-p.SCROLL_TO_OFFSET,'document'),true,false,false,0,function(){var rb=w.getElementPosition(ib.node).y;j.scrollTo(new w(pb,rb-p.SCROLL_TO_OFFSET,'document'),false);var sb=i.scry(ib.node,'h3.uiHeaderTitle')[0];if(sb){sb.tabIndex=0;sb.focus();}});},appendContentAfterLoad:function(eb,fb,gb){q.runOnceWhenSectionFullyLoaded(i.appendContent.bind(null,x(eb),fb),gb,'0');},markSectionAsLoaded:function(eb,fb,gb){q.runOnceWhenSectionFullyLoaded(function(){da(eb)&&h.removeClass(x(eb).parentNode,'fbTimelineSectionLoading');},fb,gb);},suppressSectionsAbove:function(eb){var fb,gb;for(var hb=0;hb<la.length;hb++){var ib=la[hb];if(!ib)continue;fb=s.get(ib).node;gb=null;if(aa(eb.parentNode.children).indexOf(eb)<=aa(fb.parentNode.children).indexOf(fb)){gb=ib;break;}s.get(ib).deactivateScrollLoad();}if(gb)db.navigateToSection(gb,true);},forceNoFriendActivity:function(){ta=true;},removeDupes:function(eb){var fb=da(eb);if(!fb)return;var gb=i.scry(fb,'li.fbTimelineUnit'),hb={};for(var ib=0;ib<gb.length;ib++){var jb=gb[ib];if(jb.id&&jb.id.startsWith('tl_unit_')){var kb=jb.id.substring(8,jb.id.length),lb=i.scry(jb,'div.timelineUnitContainer');if(lb.length>0)kb=kb+lb[0].getAttribute('data-time');if(hb.hasOwnProperty(kb)){jb.id='dupe_unit_'+Math.random();jb.className="hidden_elem";}else hb[kb]=1;}}},removeLoadingState:function(eb){da(eb)&&h.removeClass(x(eb),'fbTimelineSectionLoading');},setExpandLoadDataForSection:function(eb,fb){var gb=s.get(eb);gb&&gb.setExpandLoadData(fb);},appendSectionDataForAllSections:function(eb){ma=eb;for(var fb=0;fb<la.length-1;fb++){var gb=la[fb];if(!gb)continue;var hb=s.get(gb);hb&&hb.appendData(eb);}},updatePagerAfterLoad:function(eb,fb,gb,hb,ib){var jb=n.getInstance(eb.firstChild.id);if(!jb){ra[eb.firstChild.id]=g.subscribe(n.REGISTERED,function(kb,lb){ra[eb.firstChild.id].unsubscribe();delete ra[eb.firstChild.id];if(lb.id===eb.firstChild.id)db.updatePagerAfterLoad(eb,fb,gb,hb,ib);});return;}q.runOnceWhenSectionFullyLoaded(function(){h.removeClass(eb,'fbTimelineHiddenPager');jb.checkBuffer();},gb,hb);if(ib)q.runOnceWhenSectionFullyLoaded(q.adjustScrollingPagerBuffer.bind(null,eb.firstChild.id,fb),gb,hb);},repositionDialog:function(eb){g.subscribe(p.SECTION_LOADED,function(){eb.updatePosition();});},rightColumnFinished:function(eb){var fb=s.get(eb);fb.rightColumnFinished=true;},addUnrankedUnits:function(eb){var fb=x(eb),gb=i.scry(fb,'li.fbTimelineUnit');for(var hb=gb.length-1;hb>=0;hb--){var ib=gb[hb];i.insertAfter(fb,ib);h.addClass(i.find(ib,'div.timelineUnitContainer'),'fbTimelineHighlightUnit');}i.remove(fb);},addUnrankedStories:function(eb){var fb=x(eb),gb=i.scry(fb,"._5pat");for(var hb=gb.length-1;hb>=0;hb--){var ib=gb[hb];i.insertAfter(fb,ib);}i.remove(fb);}};e.exports=db;},null);
__d("TimelineLogging",["TimelineComponentKeys","TimelineController","reportData"],function(a,b,c,d,e,f,g,h,i){var j=false,k=0,l=null,m=null,n={init:function(o){if(j)return;k=o;h.register(g.LOGGING,this);},reset:function(){j=false;k=0;l=null;},log:function(o,p){p.profile_id=k;i(o,{gt:p});},logSectionChange:function(o,p){var q={timeline_section_change:1,key:o};if(l&&o==l){q.timeline_scrubber=1;l=null;}if(m&&o==m){q.sticky_header_nav=1;m=null;}n.log('timeline',q);},logScrubberClick:function(o){l=o;},logStickyHeaderNavClick:function(o){m=o;}};e.exports=n;},null);
__d("TimelineStickyHeaderComposerX",["Arbiter","Bootloader","ComposerXController","CSS","DOMQuery","Event","Parent","Run","TimelineComposerUtilities","TimelineContentLoader","TimelineStickyHeader","Vector","csx","cx","getElementText"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u){function v(x){return x&&x.getContext&&m.byClass(x.getContext(),"_2wp");}function w(x){"use strict";this._composerRoot=x;this._tokens=[o.listenToSetEstimatedDate(this._composerRoot,p.capsuleForCurrentSection),o.listenToPublish(this._composerRoot,this._close.bind(this)),g.subscribe('PhotoSnowlift.OPEN',this._close.bind(this)),g.subscribe('TimelineMLE/mleFlyoutShown',function(y,z){if(v(z)===this._composerRoot)i.reset(this._composerRoot);}.bind(this)),g.subscribe('composer/initializedAttachment',function(y,z){if(z.composerRoot===this._composerRoot){this._registerClickToDismiss();if(!z.isInitial)this._closeMLE();}else this._close();}.bind(this)),g.subscribe(q.ADJUST_WIDTH,this._toggleNarrowMode.bind(this))];this._clickCancelToken=o.listenToCancel(this._composerRoot,this._close.bind(this));n.onLeave(function(){while(this._tokens.length)this._tokens.pop().unsubscribe();this._clearClickDismissToken();if(this._clickCancelToken){this._clickCancelToken.remove();this._clickCancelToken=null;}}.bind(this));}w.prototype._toggleNarrowMode=function(event,x){"use strict";h.loadModules(["Tooltip"],function(y){var z=r.getElementDimensions(x).x>400,aa=k.scry(this._composerRoot,"._9lb");j.conditionClass(this._composerRoot,"_2wq",z);for(var ba=0;ba<aa.length;ba++){var ca=aa[ba],da=u(ca);if(z){y.set(ca,da);}else y.remove(ca);}}.bind(this));return false;};w.prototype._registerClickToDismiss=function(){"use strict";var x=j.hasClass(k.find(this._composerRoot,"._yq"),"_519b");if(!x){this._clearClickDismissToken();return;}this._clickDismissToken=l.listen(document.body,'click',function(y){var z=m.byClass(y.getTarget(),"_2wp");if(!z){this._close();this._clearClickDismissToken();}}.bind(this));};w.prototype._clearClickDismissToken=function(){"use strict";if(this._clickDismissToken){this._clickDismissToken.remove();this._clickDismissToken=null;}};w.prototype._close=function(){"use strict";this._clearClickDismissToken();this._closeMLE();i.reset(this._composerRoot);};w.prototype._closeMLE=function(){"use strict";h.loadModules(["TimelineMLE"],function(x){var y=x.getFlyout();if(v(y)===this._composerRoot)x.hideFlyout();}.bind(this));};e.exports=w;},null);
__d("TimelineSpinelessComposer",["Arbiter","Bootloader","ComposerXMarauderLogger","Run","TimelineComposer","TimelineComposerUtilities"],function(a,b,c,d,e,f,g,h,i,j,k,l){var m;function n(){i.logCompleted(m.id);}function o(q){if(q.hidePost){n();return;}if(!q.streamStory){window.location.reload();return;}if(q.backdatedTime){h.loadModules(["TimelineStoryPublisher"],function(r){r.publish(q);});n();return;}k.renderCapsuleBasedStory(m,q.streamStory);n();}var p={init:function(q){m=q;var r=g.subscribe('composer/publish',function(event,s){if(s.composer_id===m.id)o(s);});j.onLeave(r.unsubscribe.bind(r));}};e.exports=p;},null);
__d("TimelineStickyRightColumn",["Arbiter","CSS","DOMQuery","Event","PhotoSnowlift","Run","Style","TimelineContentLoader","Vector","csx","queryThenMutateDOM"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q){var r=100,s=15,t=15,u=35,v=false,w=null,x=null,y,z,aa,ba,ca,da,ea,fa;function ga(){if(k.getInstance().isOpen)return;y=n.getCurrentSection();if(!y||!y.rightColumnFinished)return;var oa=i.scry(y.node,"._3rbf")[0],pa=i.scry(y.node,"._3rbh")[0];z=oa?oa.offsetHeight:0;aa=pa?pa.offsetHeight:0;ba=o.getViewportDimensions().y;ea=oa?o.getElementPosition(oa).y:0;fa=document.body.clientWidth<document.body.scrollWidth;}function ha(){if(!y||k.getInstance().isOpen)return;if(x&&x!==y){var oa=i.scry(x.node,"._3rbh")[0];if(oa)ja(oa,'','','');}var pa=i.scry(y.node,"._3rbh")[0];if(!pa)return;if(fa){ja(pa,'','','');return;}if(!y||!y.rightColumnFinished)return;ia(y);x=h.hasClass(pa,'fixed_always')?y:null;}function ia(oa){if(aa>=z||z<=ba)return;da=ca;ca=o.getScrollPosition().y;var pa,qa=i.scry(oa.node,"._3rbh")[0];if(!qa)return;if(ca<=ea-ka()){ja(qa,'','','');return;}if(z+ea<=ca+Math.min(aa+ka(),ba-t-u)){ja(qa,'absolute','',t+'px');return;}if(aa>ba-t-ka()){if(ca<da){var ra=false;if(qa.style.position==='absolute')if(qa.style.top!==''&&ca+ka()-ea<=parseInt(qa.style.top,10)){ra=true;}else if(qa.style.bottom!==''&&ca<=(ea+z-ka())-aa)ra=true;if(ra){ja(qa,'fixed',ka()+'px','');return;}else if(qa.style.position==='absolute'&&qa.style.top){return;}else if(h.hasClass(qa,'fixed_always')){if(parseInt(qa.style.top,10)>=ka())return;pa=ca-ea-(aa-(ba-u));if(da)pa+=da-ca;ja(qa,'absolute',pa+'px','');return;}}else{var sa=false;if(qa.style.position==='absolute'||(qa.style.position===''&&!h.hasClass(qa,'fixed_always'))){pa=qa.style.top?parseInt(qa.style.top,10):0;if(ca+ba>=ea+pa+aa+u)sa=true;}if(sa){pa=ba-aa-t-u;ja(qa,'fixed',pa+'px','');return;}else if(ca==da){return;}else if(h.hasClass(qa,'fixed_always')){if(parseInt(qa.style.top,10)>=ka()){pa=ca-ea+ka();if(da)pa+=da-ca;ja(qa,'absolute',pa+'px','');return;}}else if(qa.style.position==='absolute')return;}}else ja(qa,'fixed',ka()+'px','');}function ja(oa,pa,qa,ra){m.set(oa,'bottom',ra);if(pa==='fixed'){h.addClass(oa,'fixed_always');m.set(oa,'position','');}else{h.removeClass(oa,'fixed_always');m.set(oa,'position',pa);}m.set(oa,'top',qa);g.inform('reflow');}function ka(){return h.hasClass(document.documentElement,'tinyViewport')?s:r;}function la(){q(ga,ha);}function ma(){v=false;x=null;while(w.length)w.pop().remove();w=null;}var na={init:function(){if(v)return;v=true;w=[j.listen(window,'scroll',la),j.listen(window,'resize',la)];l.onLeave(ma);},adjust:function(){if(v){ga();ha();}}};e.exports=na;},null);