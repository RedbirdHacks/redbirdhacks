/*!CK:2369850376!*//*1422635796,*/

if (self.CavalryLogger) { CavalryLogger.start_js(["zcrdx"]); }

__d("AbstractRangeInput.react",["Event","Keys","React","UserAgent","cx","joinClasses"],function(a,b,c,d,e,f,g,h,i,j,k,l){var m={BLOCK:'block',PUSH:'push',FREE:'free'},n=i.createClass({displayName:"AbstractRangeInput",propTypes:{name:i.PropTypes.string,min:i.PropTypes.number,max:i.PropTypes.number,step:i.PropTypes.number,disabled:i.PropTypes.bool,values:i.PropTypes.array,behavior:i.PropTypes.oneOf([m.BLOCK,m.PUSH,m.FREE]),onChange:i.PropTypes.func},getDefaultProps:function(){return {name:'',min:0,max:1,step:.01,disabled:false,values:[.5],behavior:m.FREE};},componentWillReceiveProps:function(o){this.setState({values:o.values});},componentDidMount:function(){var o=j.isBrowser('IE < 9')?document.documentElement:window;this._listeners=g.listen(o,{selectstart:function(p){this._thumbData&&g.prevent(p);}.bind(this),mousemove:this._onMouseMove,mouseup:this._onMouseUp});},componentWillUnmount:function(){for(var o in this._listeners){this._listeners[o]&&this._listeners[o].remove();this._listeners[o]=null;}},getInitialState:function(){var o=this.props.values;if(this.props.behavior!==m.FREE)o.sort();return {values:o};},_onKeyDown:function(o,event){switch(g.getKeyCode(event)){case h.DOWN:case h.LEFT:this._updateThumbData(o);this._moveThumbByX(-1);break;case h.RIGHT:case h.UP:this._updateThumbData(o);this._moveThumbByX(1);break;}},_onMouseDown:function(o,event){g.prevent(event);this._updateThumbData(o);this._thumbData.dragStartX=event.nativeEvent.clientX;},_onMouseMove:function(event){if(this._thumbData)this._moveThumbByX(event.clientX-this._thumbData.dragStartX);},_updateThumbData:function(o){this._thumbData={draggingIdx:o,dragStartValue:this.state.values[o],scale:this.getDOMNode().clientWidth};},_moveThumbByX:function(o){var p=(this.props.max-this.props.min)/this._thumbData.scale,q=this._thumbData.dragStartValue+(o*p),r=this.state.values,s=r.length,t=this._thumbData.draggingIdx;if(this.props.step){var u=1/this.props.step;q=Math.round(q*u)/u;}var v=this.props.min,w=this.props.max;if(this.props.behavior===m.BLOCK){v=t>0?r[t-1]:v;w=t<s-1?r[t+1]:w;}q=q<v?v:q;q=q>w?w:q;r[t]=q;if(this.props.behavior===m.PUSH){for(var x=t+1,y=r.length;x<y;x++){if(r[x]>=q)break;r[x]=q;}for(x=t-1;x>=0;x--){if(r[x]<=q)break;r[x]=q;}}this.setState({values:r});this.props.onChange&&this.props.onChange(r);},_onMouseUp:function(event){if(this._thumbData)this._thumbData=null;},render:function(){var o=this.state.values,p=this.props.disabled,q=o.length>1,r=this.props.max-this.props.min,s=o.map(function(t,u){var v=(t-this.props.min)/r,w=this.props.name+(q?'['+u+']':'');return (i.createElement("div",{className:(("_4qwr")+(p?' '+"_4qws":'')),key:'thumb-'+u,onDragStart:g.prevent,onKeyDown:p?null:function(x){return this._onKeyDown(u,x);}.bind(this),onMouseDown:p?null:function(x){return this._onMouseDown(u,x);}.bind(this),style:{left:(v*100)+'%'},tabIndex:0},i.createElement("input",{onChange:this.props.onChange,name:w,value:t,type:"hidden"})));}.bind(this));return (i.createElement("div",i.__spread({},this.props,{className:l(this.props.className,"_4qwt")}),i.createElement("div",{className:"_4qwu"}),s));}});e.exports=n;},null);
__d("clamp",[],function(a,b,c,d,e,f){function g(h,i,j){if(i<h)return h;if(i>j)return j;return i;}e.exports=g;},null);
__d("PhotoZoomCropDimensions",["BasicVector","confine"],function(a,b,c,d,e,f,g,h){var i=320,j=.5,k=.5,l=180,m=.05,n=3;function o(q,r){return Number(q.toFixed(r||n));}p.prototype.clone=function(){"use strict";return new p(this.$PhotoZoomCropDimensions0).setSize(this.$PhotoZoomCropDimensions1.x,this.$PhotoZoomCropDimensions1.y).setSmallestSize(this.$PhotoZoomCropDimensions2.x,this.$PhotoZoomCropDimensions2.y).setCenter(this.$PhotoZoomCropDimensions3.x,this.$PhotoZoomCropDimensions3.y).setZoom(this.$PhotoZoomCropDimensions4);};function p(q){"use strict";this.$PhotoZoomCropDimensions0=q;this.setSmallestSize(l,l).setCenter(j,j);this.setSize(i,i).setZoom(k);}p.prototype.getArea=function(){"use strict";var q=this.getPosition(),r=this.$PhotoZoomCropDimensions1.div(this.$PhotoZoomCropDimensions4);return {height:Math.round(r.y),width:Math.round(r.x),x:Math.round(Math.abs(q.left)/this.$PhotoZoomCropDimensions4),y:Math.round(Math.abs(q.top)/this.$PhotoZoomCropDimensions4)};};p.prototype.getPosition=function(){"use strict";var q=this.$PhotoZoomCropDimensions5();return {height:o(q.imageSize.y),left:o(this.$PhotoZoomCropDimensions1.x/2-q.center.x),top:o(this.$PhotoZoomCropDimensions1.y/2-q.center.y),width:o(q.imageSize.x)};};p.prototype.getRect=function(){"use strict";var q=this.$PhotoZoomCropDimensions5(),r=this.$PhotoZoomCropDimensions1.div(this.$PhotoZoomCropDimensions4);return {center:{x:q.center.x/q.imageSize.x,y:q.center.y/q.imageSize.y},size:{x:r.x,y:r.y}};};p.prototype.getSize=function(){"use strict";return this.$PhotoZoomCropDimensions1;};p.prototype.getZoom=function(){"use strict";return this.$PhotoZoomCropDimensions4;};p.prototype.getZoomRange=function(){"use strict";var q=Math.min(this.$PhotoZoomCropDimensions0.x,this.$PhotoZoomCropDimensions0.y);return {max:this.$PhotoZoomCropDimensions1.x/Math.min(this.$PhotoZoomCropDimensions2.x,q),min:this.$PhotoZoomCropDimensions1.x/q};};p.prototype.hasSpaceToDrag=function(){"use strict";var q=this.getZoomRange();return !(p.isSquare(this.$PhotoZoomCropDimensions0)&&q.min===q.max);};p.prototype.isCurrentlyDragable=function(){"use strict";var q=this.$PhotoZoomCropDimensions5().imageSize;return q.x!==this.$PhotoZoomCropDimensions1.x||q.y!==this.$PhotoZoomCropDimensions1.y;};p.prototype.moveByPixels=function(q,r){"use strict";var s=this.$PhotoZoomCropDimensions5();return this.moveBy(q/s.imageSize.x,r/s.imageSize.y);};p.prototype.moveBy=function(q,r){"use strict";this.setCenter(this.$PhotoZoomCropDimensions3.x+q,this.$PhotoZoomCropDimensions3.y+r);var s=this.$PhotoZoomCropDimensions5();this.$PhotoZoomCropDimensions3=s.center.div(s.imageSize.x,s.imageSize.y);return this;};p.prototype.setCenter=function(q,r){"use strict";this.$PhotoZoomCropDimensions3=new g(h(q,0,1),h(r,0,1));return this;};p.prototype.setSize=function(q,r){"use strict";this.$PhotoZoomCropDimensions1=new g(q,r);return this;};p.prototype.setSmallestSize=function(q,r){"use strict";this.$PhotoZoomCropDimensions2=new g(q,r);return this;};p.prototype.setZoom=function(q){"use strict";var r=this.getZoomRange();this.$PhotoZoomCropDimensions4=h(q,r.min,r.max);return this;};p.prototype.$PhotoZoomCropDimensions6=function(q,r){"use strict";var s=this.$PhotoZoomCropDimensions1.x/2,t=this.$PhotoZoomCropDimensions1.y/2;return new g(h(r.x,s,q.x-s),h(r.y,t,q.y-t));};p.prototype.$PhotoZoomCropDimensions5=function(){"use strict";var q=this.$PhotoZoomCropDimensions0.mul(this.$PhotoZoomCropDimensions4);return {imageSize:q,center:this.$PhotoZoomCropDimensions6(q,this.$PhotoZoomCropDimensions3.mul(q.x,q.y))};};p.isSquare=function(q){"use strict";return Math.abs(q.x/q.y-1)<m;};e.exports=p;},null);
__d("SpotlightProfilePicCropOptions",[],function(a,b,c,d,e,f){var g=2.5,h=.8,i=320,j={getOptions:function(k,l){var m={},n=Math.min(l.x,l.y),o,p,q=k.facebox;if(q){p=Math.max(q.size.x*l.x,q.size.y*l.y)*g;o=q.center;}else{p=h*n;if(k.focus)o=k.focus;}var r=l.x/k.original.width;m.height=m.width=Math.min(Math.max(p,i*r),n);if(o){m.center_x=Math.min(Math.max(o.x*l.x,m.width/2),l.x-m.width/2);m.center_y=Math.min(Math.max(o.y*l.y,m.height/2),l.y-m.height/2);}return m;},getOptionsAsRatio:function(k,l){var m=j.getOptions(k,l),n=Math.min(l.x,l.y);return {center:{x:m.center_x?m.center_x/l.x:.5,y:m.center_y?m.center_y/l.y:.5},size:{x:m.width/n,y:m.height/n}};}};e.exports=j;},null);
__d("FileUploadTarget",["AsyncUploadRequest","DragDropFileUpload","DragDropTarget","emptyFunction"],function(a,b,c,d,e,f,g,h,i,j){function k(l,m){"use strict";var n=(function(o){this.$FileUploadTarget0=new g(m).setFiles({file:o}).setRelativeTo(l).setStatusElement(l).setAllowCrossOrigin(this.$FileUploadTarget1);this.$FileUploadTarget0.subscribe('complete',function(p,q){this.onCompleteCallback(q);this.$FileUploadTarget0=null;}.bind(this));this.$FileUploadTarget0.send();}).bind(this);this.dragDropTarget=new i(l).setOnFilesDropCallback(function(o){o.length&&this.asyncProcess(o,function(p){p.length&&n(p);});}.bind(this));this.asyncProcess=function(o,p){p(o);};this.preprocess=function(o){return o;};this.onCompleteCallback=j;}k.prototype.setAllowCrossOrigin=function(l){"use strict";this.$FileUploadTarget1=l;return this;};k.prototype.setPreprocessor=function(l){"use strict";this.preprocess=l;return this;};k.prototype.setAsyncProcessor=function(l){"use strict";this.asyncProcess=l;return this;};k.prototype.onComplete=function(l){"use strict";this.onCompleteCallback=l;return this;};k.prototype.abort=function(){"use strict";this.$FileUploadTarget0&&this.$FileUploadTarget0.abort();};k.prototype.activate=function(){"use strict";if(!h.isSupported())return this;this.dragDropTarget.setFileFilter(this.preprocess).enable();return this;};e.exports=k;},null);
__d("ErrorDialog",["Dialog","emptyFunction"],function(a,b,c,d,e,f,g,h){var i={showAsyncError:function(j){try{return i.show(j.getErrorSummary(),j.getErrorDescription());}catch(k){alert(j);}},show:function(j,k,l,m){return (new g()).setTitle(j).setBody(k).setButtons([g.OK]).setStackable(true).setModal(true).setHandler(l||h).setButtonsMessage(m||'').show();}};e.exports=i;},null);
__d("SinglePictureUploadTarget",["Bootloader","Dialog","ErrorDialog","FileUploadTarget","emptyFunction","htmlSpecialChars","fbt"],function(a,b,c,d,e,f,g,h,i,j,k,l,m){function n(o,p){"use strict";this.fileUploadTarget=new j(o,p);this.preprocessCallback=k;this.asyncPreprocessCallback=function(q,r){r(q);};this.oncompleteCallback=k;this.afterSuccessCallback=k;this.maxWidth=null;this.maxHeight=null;}n.prototype.setAllowCrossOrigin=function(o){"use strict";this.fileUploadTarget.setAllowCrossOrigin(o);return this;};n.prototype.setPreprocessCallback=function(o){"use strict";this.preprocessCallback=o;return this;};n.prototype.setAsyncPreprocessCallback=function(o){"use strict";this.asyncPreprocessCallback=o;return this;};n.prototype.setOncompleteCallback=function(o){"use strict";this.oncompleteCallback=o;return this;};n.prototype.setAfterSuccessCallback=function(o){"use strict";this.afterSuccessCallback=o;return this;};n.prototype.setMaximumDimensions=function(o,p){"use strict";this.maxWidth=o;this.maxHeight=p;return this;};n.prototype.activate=function(){"use strict";var o=function(s){return l(s.name);},p=(function(s){if(s.length>1){i.show("Upload Error",m._("You can only select {max-photos} photos to upload to this album. Only the first {max-photos} photo you selected will be uploaded.",[m.param("max-photos",1),m.param("max-photos",1)]));s=[s[0]];}var t=s[0];if(!t.type.match(/^image\//)){i.show("Upload Error",m._("We could not understand the contents of {filename}. Make sure it is a jpg, gif, or png formatted image.",[m.param("filename",o(t))]));return [];}this.preprocessCallback(s);return s;}).bind(this),q=(function(s,t){var u=1024*1024*16,v=1024*1024*1,w=function(y){if(y.size>u){i.show("Upload Error",m._("{filename} is too large. Please resize your photo to under 8000x8000 pixels and try again.",[m.param("filename",o(s[0]))]));t([]);}else this.asyncPreprocessCallback([y],t);}.bind(this),x=s[0];if((x.size<v)||(!this.maxWidth&&!this.maxHeight)){w(x);}else g.loadModules(["ImageExif","ImageResizer"],function(y,z){if(!z.isSupported()){w(x);return;}var aa=new z(x,this.maxWidth,this.maxHeight);aa.subscribe('resized',function(ba,ca){if(ca.size>x.size){w(x);}else w(ca);}.bind(this));aa.subscribe('error',function(){w(x);}.bind(this));y.readFromFile(x,function(ba){ba&&aa.setOrientation(ba.Orientation);aa.resize();});});}).bind(this),r=(function(s){var t=s[0];if(!t.getResponse())return;this.oncompleteCallback(t);var u=t.getResponse().getPayload();if(t.isSuccess()){this.afterSuccessCallback(u);}else if(u&&u.__dialog){var v=new h();v.$SinglePictureUploadTarget1(u.__dialog);v.setButtons(h.OK).show();}else i.show(u.error.title,u.error.body);}).bind(this);return this.fileUploadTarget.onComplete(r).setPreprocessor(p).setAsyncProcessor(q).activate();};e.exports=n;},null);
__d("SpotlightViewerInit",["DOM","React"],function(a,b,c,d,e,f,g,h){var i={render:function(j,k){var l=g.create('div'),m=h.render(j,l);g.appendContent(document.body,l);m.subscribeOnce('close',function(){h.unmountComponentAtNode(l);g.remove(l);k&&k();});return m;}};e.exports=i;},null);
__d("PhotoZoomCropImagePreview.react",["React","cx","joinClasses"],function(a,b,c,d,e,f,g,h,i){var j=g.createClass({displayName:"PhotoZoomCropImagePreview",propTypes:{dimensions:g.PropTypes.object,size:g.PropTypes.object,src:g.PropTypes.string},render:function(){var k=this.props.dimensions,l=this.props.size,m=k.getSize().x/l.x;if(m!==1)k=k.clone().setSize(l.x,l.y).setZoom(k.getZoom()/m);return (g.createElement("div",g.__spread({},this.props,{className:i(this.props.className,"_1k3v"),style:Object.assign({},(this.props.style||{}),{height:l.y,width:l.x})}),g.createElement("img",{className:"_1k3w",src:this.props.src,style:k.getPosition()})));}});e.exports=j;},null);
__d("PhotoZoomCropImage.react",["Event","Keys","React","UserAgent","Vector","Image.react","PhotoZoomCropImagePreview.react","cx","ix","fbt","joinClasses"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q){var r=5,s=i.createClass({displayName:"PhotoZoomCropImage",propTypes:{dimensions:i.PropTypes.object,enableDrag:i.PropTypes.bool,src:i.PropTypes.string},getDefaultProps:function(){return {enableDrag:true};},getInitialState:function(){return {moved:false};},componentDidMount:function(){var t=j.isBrowser('IE < 9')?document.documentElement:window;this._listeners=g.listen(t,{mousemove:this._handleMouseMove,mouseup:this._handleMouseUp});},componentWillUnmount:function(){for(var t in this._listeners){this._listeners[t]&&this._listeners[t].remove();this._listeners[t]=null;}},render:function(){var t=this.props.dimensions,u=t.getSize();return (i.createElement("div",i.__spread({},this.props,{className:q(this.props.className,"_4on5"),style:Object.assign({},(this.props.style||{}),{height:u.y,width:u.x})}),i.createElement(m,{dimensions:t,onKeyDown:this._handleKeyDown,size:u,src:this.props.src,tabIndex:0}),i.createElement("div",{className:(("_3dfy")+(this.state.moved||!this.props.enableDrag?' '+"_3dfz":''))},i.createElement("span",{className:"_3df-"},i.createElement(l,{className:"_3-8_ _3df_",src:o('/images/ads/cropper/drag.png')}),"Drag to reposition photo")),i.createElement("img",{className:(("_4on7")+(!this.props.enableDrag?' '+"_3mk2":'')),onDragStart:g.prevent,onMouseDown:this._handleMouseDown,src:this.props.src,style:t.getPosition()})));},_handleKeyDown:function(t){this._position=null;var u=0,v=0;switch(g.getKeyCode(t)){case h.DOWN:v=r;break;case h.LEFT:u=-r;break;case h.RIGHT:u=r;break;case h.UP:v=-r;break;}if(u||v){this.props.onMove(u,v);this.setState({moved:true});}},_handleMouseDown:function(t){if(this._position)return;t.preventDefault();this._position=k.getEventPosition(t);},_handleMouseMove:function(t){if(!this._position||!this.props.enableDrag)return;var u=k.getEventPosition(t),v=this._position.sub(u);this.props.onMove(v.x,v.y);this.setState({moved:true});this._position=u;},_handleMouseUp:function(){this._position=null;}});e.exports=s;},null);
__d("PhotoZoomCropSlider.react",["Keys","React","AbstractRangeInput.react","clamp","cx","joinClasses"],function(a,b,c,d,e,f,g,h,i,j,k,l){var m=6,n=h.createClass({displayName:"PhotoZoomCropSlider",propTypes:{onZoom:h.PropTypes.func,zoom:h.PropTypes.number,zoomRange:h.PropTypes.object},render:function(){var o=this.props.zoomRange;return (h.createElement("div",{className:l(this.props.className,"_55vh")},h.createElement("div",{className:(("_55vi")+(o.min===this.props.zoom?' '+"_4obh":'')),onClick:this._minus,onKeyUp:this._minusIfValid,tabIndex:0},"−"),h.createElement(i,{className:"_55vj",disabled:o.max===o.min,max:o.max,min:o.min,onChange:this.props.onZoom,values:[this.props.zoom]}),h.createElement("div",{className:(("_55vk")+(o.max===this.props.zoom?' '+"_4obh":'')),onClick:this._plus,onKeyUp:this._plusIfValid,tabIndex:0},"+")));},_zoomInDirection:function(o){var p=this.props.zoomRange.max,q=this.props.zoomRange.min;this.props.onZoom([j(this.props.zoom+(o*(p-q)/m),q,p)]);},_minus:function(){this._zoomInDirection(-1);},_minusIfValid:function(event){if(event.which===g.RETURN)this._minus();},_plus:function(){this._zoomInDirection(1);},_plusIfValid:function(event){if(event.which===g.RETURN)this._plus();}});e.exports=n;},null);
__d("PhotoZoomCrop.react",["BasicVector","PhotoZoomCropDimensions","PhotoZoomCropImage.react","PhotoZoomCropImagePreview.react","PhotoZoomCropSlider.react","React","Image.react","cx","joinClasses","xuiglyph"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p){var q=l.PropTypes.shape({x:l.PropTypes.number.isRequired,y:l.PropTypes.number.isRequired}),r=l.createClass({displayName:"PhotoZoomCrop",propTypes:{center:q,cropSizeRatio:q,imageSize:l.PropTypes.instanceOf(g),messageText:l.PropTypes.string,previewSize:l.PropTypes.number,src:l.PropTypes.string,warningText:l.PropTypes.string},getDefaultProps:function(){return {previewSize:32};},getInitialState:function(){this._dims=new h(this.props.imageSize);if(this.props.center)this._dims.setCenter(this.props.center.x,this.props.center.y);if(this.props.cropSizeRatio){var s=this.props.cropSizeRatio.x*this.props.imageSize.x;this._dims.setZoom(this._dims.getSize().x/s);}return this._getDimensionsState();},render:function(){return (l.createElement("div",{className:o("_4liw",this.props.className)},l.createElement(i,{className:"_1szc",dimensions:this._dims,onMove:this._handleMove,enableDrag:this._dims.isCurrentlyDragable(),src:this.props.src}),l.createElement(j,{className:"_1szd",dimensions:this._dims,size:{x:this.props.previewSize,y:this.props.previewSize},src:this.props.src}),l.createElement(k,{className:"_4lix",onZoom:this._handleZoom,zoom:this.state.zoom,zoomRange:this._dims.getZoomRange()}),this._getMessage()));},getDimensions:function(){return this._dims;},resetDimensions:function(){this.setState(this.getInitialState());},_handleZoom:function(s){this._dims.setZoom(s[0]);this.setState(this._getDimensionsState());},_handleMove:function(s,t){this._dims.moveByPixels(s,t);this.setState(this._getDimensionsState());},_getDimensionsState:function(){return {dimensions:this._dims.getPosition(),zoom:this._dims.getZoom()};},_getMessage:function(){var s,t;if(this.state.zoom>1&&this.props.warningText){s=p({name:'error-solid',shade:'white',size:'small'});t=this.props.warningText;}else if(this.props.messageText){s=p({name:'info-solid',shade:'white',size:'small'});t=this.props.messageText;}else return null;return (l.createElement("div",{className:"_a62"},l.createElement(m,{className:"_a63",src:s}),t));}});e.exports=r;},null);
__d("ProfilePicCropViewerStrings",["fbt"],function(a,b,c,d,e,f,g){var h={BUTTON_CANCEL:"Cancel",BUTTON_CLOSE:"Close",BUTTON_SAVE:"Save Profile Picture",CROP_AND_SAVE:"Crop Photo",CROP_EXPLANATION:"Crop this photo before setting it as your profile picture.",CROP_INSTRUCTIONS:"Move the box to where you want to crop your photo. Drag the corners in or out to adjust the size.",CROP_SAVING:"Saving Profile Picture...",LEAVE_WARNING_BODY:"The changes you made to your profile picture won't be saved if you close this dialog.",LEAVE_WARNING_CANCEL:"Stay on This Page",LEAVE_WARNING_OK:"Leave This Page",LEAVE_WARNING_TITLE:"Changes Not Saved",LEAVE_WARNING_UNLOAD:"The changes you made to your profile picture haven't been saved.",LOADING:"Loading...",PREV_PHOTO_ADJUST_THUMBNAIL:"You've previously used this profile picture. Reposition the photo to select the thumbnail version.",PREVIOUS_PHOTO_TITLE:"Edit Profile Photo",PREVIOUS_PIC:"You've used this photo as your profile picture before. Do you want to use it again?",PROFILE_PIC_VISIBILITY:"Your current profile picture is always public.",SAVE_AND_CROP:"Crop and Save",SAVED_BODY:"Your profile picture was successfully saved.",SAVED_TITLE:"Profile Picture Saved",SET_THUMBNAIL:"Edit Thumbnail",SKIP_CROP:"Skip Cropping",SKIP_CROP_EXPLANATION:"Save the entire photo as your profile picture and edit the thumbnail version.",THUMBNAIL_MODE_EXPLANATION:"The entire photo will be saved as your profile picture. Reposition the photo to select the thumbnail version.",UPLOADING:"Uploading...",SMALL_PHOTO_WARNING:"This photo is small and your profile picture will be less clear.",ZOOM_WARNING:"Zooming in this close will make your profile picture less clear."};e.exports=h;},null);
__d("ProfilePicMenuDialogThumbnailMixin",[],function(a,b,c,d,e,f){var g={getThumbnailCoordinates:function(h,i){return {endX:Math.abs((h.x+h.width)/i.width),endY:Math.abs((h.y+h.height)/i.height),startX:Math.abs(h.x/i.width),startY:Math.abs(h.y/i.height)};}};e.exports=g;},null);
__d("XProfilePicCropAsyncController",["XController"],function(a,b,c,d,e,f){e.exports=b("XController").create("\/profile\/picture\/crop_profile_pic\/",{photo_id:{type:"Int",required:true},profile_id:{type:"Int",required:true},height:{type:"Float",required:true},width:{type:"Float",required:true},x:{type:"Float",required:true},y:{type:"Float",required:true},source:{type:"Enum",defaultValue:"timeline",enumType:1},method:{type:"Enum",defaultValue:"existing",enumType:1}});},null);
__d("XProfilePicMakeAsyncController",["XController"],function(a,b,c,d,e,f){e.exports=b("XController").create("\/profile\/picture\/make_profile_pic\/",{end_x:{type:"Float"},end_y:{type:"Float"},photo_id:{type:"Int",required:true},profile_id:{type:"Int",required:true},source:{type:"Enum",defaultValue:"timeline",enumType:1},start_x:{type:"Float"},start_y:{type:"Float"},method:{type:"Enum",defaultValue:"existing",enumType:1}});},null);
__d("XProfilePicSaver",["AsyncRequest","ArbiterMixin","ProfilePictureFlowLogging","XProfilePicCropAsyncController","XProfilePicMakeAsyncController","mixin"],function(a,b,c,d,e,f,g,h,i,j,k,l){var m=i.step,n=l(h);for(var o in n)if(n.hasOwnProperty(o))q[o]=n[o];var p=n===null?null:n.prototype;q.prototype=Object.create(p);q.prototype.constructor=q;q.__superConstructor__=n;function q(r,s){"use strict";this.$XProfilePicSaver0=r;this.$XProfilePicSaver1=s;}q.prototype.setProfilePhotoSource=function(r){"use strict";this.$XProfilePicSaver2=r;return this;};q.prototype.setProfilePhotoMethod=function(r){"use strict";this.$XProfilePicSaver3=r;return this;};q.prototype.setFlowType=function(r){"use strict";this.$XProfilePicSaver4=r;return this;};q.prototype.saveCroppedProfilePic=function(r){"use strict";this.$XProfilePicSaver5=true;this.$XProfilePicSaver6(j.getURIBuilder().setFloat('x',r.x).setFloat('y',r.y).setFloat('width',Math.min(r.width,1)).setFloat('height',Math.min(r.height,1)));this.$XProfilePicSaver7(m.CROP_SAVING);};q.prototype.saveAsProfilePic=function(){"use strict";this.$XProfilePicSaver8();};q.prototype.saveAsProfilePicWithPosition=function(r){"use strict";this.$XProfilePicSaver8(r);};q.prototype.$XProfilePicSaver8=function(r){"use strict";this.$XProfilePicSaver5=false;var s=k.getURIBuilder();if(r)s.setFloat('start_x',100*r.startX).setFloat('start_y',100*r.startY).setFloat('end_x',100*r.endX).setFloat('end_y',100*r.endY);this.$XProfilePicSaver6(s);this.$XProfilePicSaver7(m.PREVIOUS_PIC_SAVING);};q.prototype.$XProfilePicSaver9=function(r){"use strict";this.inform('error',r);this.$XProfilePicSaver7(this.$XProfilePicSaver5?m.CROP_FAIL:m.PREVIOUS_PIC_FAIL);};q.prototype.$XProfilePicSaver7=function(r){"use strict";this.$XProfilePicSaver4&&i.setFlowType(this.$XProfilePicSaver4);i.log(r);};q.prototype.$XProfilePicSaver6=function(r){"use strict";r.setInt('photo_id',this.$XProfilePicSaver0).setInt('profile_id',this.$XProfilePicSaver1).setEnum('source',this.$XProfilePicSaver2||'photo_view');this.$XProfilePicSaver3&&r.setEnum('method',this.$XProfilePicSaver3);new g(r.getURI()).setErrorHandler(this.$XProfilePicSaver9.bind(this)).setHandler(this.$XProfilePicSavera.bind(this)).send();this.$XProfilePicSaver7(m.LOADING);};q.prototype.$XProfilePicSavera=function(r){"use strict";this.inform('success',r);this.$XProfilePicSaver7(this.$XProfilePicSaver5?m.CROP_SUCCESS:m.PREVIOUS_PIC_SUCCESS);this.$XProfilePicSaver7(m.SUCCESS);};e.exports=q;},null);
__d("ProfilePicCropViewerMixin",["AsyncResponse","DialogX","LayerDestroyOnHide","ProfilePicCropViewerStrings","ProfilePictureFlowLogging","ProfilePicMenuDialogThumbnailMixin","React","Run","TimelineURI","XProfilePicSaver","XUIDialogButton.react","XUIDialogBody.react","XUIDialogFooter.react","XUIDialogTitle.react","tidyEvent"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u){var v=360,w={propTypes:{method:m.PropTypes.string,source:m.PropTypes.string,uploadRequest:m.PropTypes.object},componentDidMount:function(){this._preventClose=true;n.onBeforeUnload(function(){if(this.isMounted()&&!this._shouldAllowClose())return j.LEAVE_WARNING_UNLOAD;}.bind(this),true);this._logFlowStep(k.step.VIEWER_INIT);},componentDidUpdate:function(x,y){if(!y.photoData&&this.state.photoData)this._logFlowStep(this.state.photoData.previousprofilepic?k.step.PREVIOUS_PIC_INIT:k.step.CROP);},componentWillUnmount:function(){this._warningDialog&&this._warningDialog.destroy();this._warningDialog=null;},getViewerID:function(){return this.props.setid;},_forceClose:function(x){this._preventClose=false;this.close();this._logFlowStep(x||k.step.CANCEL);},handleCancel:function(){if(this.props.cancelCallback)this.props.cancelCallback();if(!this.props.warnOnCancel||this._shouldAllowClose())return this._forceClose();this._showCloseWarning();},handleUploadCancel:function(){this.props.uploadRequest&&this.props.uploadRequest.abort();this._forceClose(k.step.UPLOAD_CANCEL);},handleSetThumbnailSave:function(){var x=this._prepareForSave();x.saveAsProfilePicWithPosition(this.getThumbnailCoordinates(this.getCropArea(),this.getPhotoSize()));this._logFlowStep(k.step.SKIP_CROP);},handleSave:function(){var x=this._prepareForSave();if(this.state.photoData.previousprofilepic){if(!this.shouldGenThumbnailForReverts()){x.saveAsProfilePic();}else x.saveAsProfilePicWithPosition(this.getThumbnailCoordinates(this.getCropArea(),this.getPhotoSize()));return;}var y=this.getCropArea(),z=this.getPhotoSize();x.saveCroppedProfilePic({x:y.x/z.width,y:y.y/z.height,width:y.width/z.width,height:y.height/z.height});},_prepareForSave:function(){this.setState({savingMode:true});this._preventClose=false;var x=new p(this.state.photoData.id,this.props.profileID).setFlowType(this.getFlowType());u([x.subscribe('success',this._savingSuccess),x.subscribe('error',this._savingError)]);this.props.method&&x.setProfilePhotoMethod(this.props.method);this.props.source&&x.setProfilePhotoSource(this.props.source);return x;},_logFlowStep:function(x){k.setFlowType(this.getFlowType()).setSource(this.props.source).log(x);},_savingSuccess:function(x,y){if(this.props.successCallback){this.props.successCallback(y);this.close();return;}var z=new h({addedBehaviors:[i],width:v,xui:true},m.createElement("div",null,m.createElement(t,{showCloseButton:false},j.SAVED_TITLE),m.createElement(r,null,j.SAVED_BODY)));z.subscribeOnce('aftershow',this.close);z.show();o.goToProfileID(this.props.profileID);},_savingError:function(x,y){this._preventClose=true;this.setState({savingMode:false});g.defaultErrorHandler(y);this.inform('save_error',y);if(this.props.errorCallback)this.props.errorCallback();},_shouldAllowClose:function(){return !this._preventClose;},_showCloseWarning:function(){if(!this._warningDialog)this._warningDialog=new h({modal:true,width:v,xui:true},m.createElement("div",null,m.createElement(t,null,j.LEAVE_WARNING_TITLE),m.createElement(r,null,j.LEAVE_WARNING_BODY),m.createElement(s,null,m.createElement(q,{action:"cancel",label:j.LEAVE_WARNING_CANCEL}),m.createElement(q,{action:"cancel",onClick:function(){return this._forceClose();}.bind(this),label:j.LEAVE_WARNING_OK,use:"confirm"}))));this._warningDialog.show();}};e.exports=Object.assign(w,l);},null);
__d("ProfilePicViewerFooterText.react",["React","XUIGrayText.react","cx"],function(a,b,c,d,e,f,g,h,i){var j=g.createClass({displayName:"ProfilePicViewerFooterText",propTypes:{},render:function(){return (g.createElement(h,g.__spread({},this.props,{className:"_2pi2",display:"block",shade:"medium",size:"small"}),this.props.children));}});e.exports=j;},null);
__d("ProfilePicCropViewerLoading.react",["React","XUISpinner.react","cx","joinClasses"],function(a,b,c,d,e,f,g,h,i,j){var k=g.createClass({displayName:"ProfilePicCropViewerLoading",render:function(){return (g.createElement("div",{className:j("_278e",this.props.className)},g.createElement(h,{background:"dark",className:"_4-cf",size:"large"})));}});e.exports=k;},null);
__d("PhotoProgressBar.react",["React","ProgressBar.react"],function(a,b,c,d,e,f,g,h){var i=1,j=50,k=g.createClass({displayName:"PhotoProgressBar",propTypes:{fakeLoadMultplier:g.PropTypes.number},getDefaultProps:function(){return {fakeLoadMultplier:1.5,min:0,max:100};},getInitialState:function(){return {value:this.props.value};},render:function(){var l=this._scaleValue(this.state.value);return g.createElement(h,g.__spread({},this.props,{value:l}));},componentWillReceiveProps:function(l){this.setState({value:l.value});},componentWillUnmount:function(){clearTimeout(this._fakeLoad);},_fakeLoadBar:function(){this.setState({value:this.state.value+i});},_scaleValue:function(l){var m=this.props,n=(m.max-m.min)*m.fakeLoadMultplier+m.min;if(l>=m.max&&l<n){clearTimeout(this._fakeLoad);this._fakeLoad=setTimeout(this._fakeLoadBar,j);}return l/n*m.max;}});e.exports=k;},null);
__d("ZoomProfilePicDragger.react",["BasicVector","React","PhotoZoomCrop.react"],function(a,b,c,d,e,f,g,h,i){var j=h.createClass({displayName:"ZoomProfilePicDragger",propTypes:{photoData:h.PropTypes.object.isRequired},render:function(){var k=this.getImage(),l=this.props.photoData.facebox||{center:{x:.5,y:.5},size:{x:1,y:1}};return (h.createElement(i,h.__spread({},this.props,{center:l.center,cropSizeRatio:l.size,imageSize:new g(k.width,k.height),ref:"zoomCrop",src:k.uri})));},getDimsArea:function(){return this.getDimensions().getArea();},getImage:function(){return this.props.photoData.original;},getDimensions:function(){return this.refs.zoomCrop.getDimensions();},resetDimensions:function(){return this.refs.zoomCrop.resetDimensions();}});e.exports=j;},null);
__d("ZoomProfilePicCropViewerBody.react",["BasicVector","PhotoZoomCropDimensions","ProfilePicCropViewerStrings","React","SpotlightProfilePicCropOptions","SpotlightViewerDimensionMixin","PhotoZoomCrop.react","ProfilePicCropViewerLoading.react","PhotoProgressBar.react","ZoomProfilePicDragger.react","cx"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q){var r=320,s=j.createClass({displayName:"ZoomProfilePicCropViewerBody",mixins:[l],propTypes:{height:j.PropTypes.number.isRequired,photoData:j.PropTypes.object,savingMode:j.PropTypes.bool.isRequired,width:j.PropTypes.number.isRequired},getInitialState:function(){return {uploadStatus:null};},componentDidMount:function(){this._listenForUploadProgress();},componentDidUpdate:function(){this._listenForUploadProgress();},componentWillUnmount:function(){if(this._progress){this._progress.unsubscribe();this._progress=null;}},render:function(){var t=this.props.photoData,u;if(this.state.uploadStatus!==null){u=j.createElement(o,{className:"_2aii",isRounded:true,size:"small",value:this.state.uploadStatus});}else if(!t||this.props.savingMode)u=j.createElement(n,{className:((!t?"_3mdt":''))});return (j.createElement("div",{className:"_3mds",style:{height:this.props.height}},this._getImage(),u));},_getImage:function(){var t=this.props.photoData;if(!t)return null;if(t.previousprofilepic)return (j.createElement(p,{messageText:i.PREV_PHOTO_ADJUST_THUMBNAIL,photoData:t,ref:"image"}));var u=new g(t.original.width,t.original.height),v=k.getOptionsAsRatio(t,u),w=u.x<r||u.y<r?i.SMALL_PHOTO_WARNING:i.ZOOM_WARNING;return (j.createElement(m,j.__spread({},this.props,{className:this.props.className,center:v.center,cropSizeRatio:v.size,imageSize:u,ref:"image",src:t.original.uri,warningText:w})));},resetDimensions:function(){this.refs.image.resetDimensions();},getDimensionsArea:function(){return this.refs.image.getDimensions().getArea();},hasSpaceToDrag:function(){var t=new g(this.props.photoData.original.width,this.props.photoData.original.height);return !h.isSquare(t);},_listenForUploadProgress:function(){var t=this.props.uploadRequest;if(t&&t.subscribe&&!this._progress)this._progress=t.subscribe('progress',function(u,v){return this.setState({uploadStatus:v.event.loaded/v.event.total*100});}.bind(this));}});e.exports=s;},null);
__d("ZoomProfilePicCropViewer.react",["ArbiterMixin","ProfilePicExperimentationConfig","ProfilePicCropViewerMixin","ProfilePicCropViewerStrings","ProfilePictureFlowLogging","React","SpotlightViewerCoreMixin","SpotlightViewerDimensionMixin","Tooltip","Image.react","Link.react","ProfilePicViewerFooterText.react","XUIButton.react","XUIDialog.react","XUIDialogFooter.react","XUIDialogTitle.react","XUIGrayText.react","ZoomProfilePicCropViewerBody.react","cx","keyMirror"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z){var aa=484,ba=520,ca=z({CROP:null,SET_THUMBNAIL:null}),da=l.createClass({displayName:"ZoomProfilePicCropViewer",mixins:[g,i,m,n],propTypes:{profileID:l.PropTypes.string.isRequired,setid:l.PropTypes.string.isRequired,warnOnCancel:l.PropTypes.bool,cropOnlyMode:l.PropTypes.bool,successCallback:l.PropTypes.func,errorCallback:l.PropTypes.func,cancelCallback:l.PropTypes.func},getInitialState:function(){return {open:true,photoData:null,savingMode:false,mode:ca.CROP};},render:function(){var ea=this.state.photoData,fa=this.isCropMode()?j.CROP_AND_SAVE:j.SET_THUMBNAIL;if(this.props.uploadRequest){fa=j.UPLOADING;}else if(!ea){fa=j.LOADING;}else if(ea.previousprofilepic)fa=j.PREVIOUS_PHOTO_TITLE;var ga;if(this.props.uploadRequest){ga=l.createElement(s,{label:j.BUTTON_CANCEL,onClick:this.handleUploadCancel});}else if(this.state.savingMode){ga=l.createElement(r,{weight:"bold"},j.CROP_SAVING);}else if(ea)ga=[this.renderPublicWarning(ea),l.createElement(s,{key:"buttonCancel",label:j.BUTTON_CANCEL,onClick:this.handleCancel}),l.createElement(s,{key:"buttonSave",label:this.getSaveButtonLabel(),onClick:this.handleSaveClick,use:"confirm"})];var ha=this.renderFooterLeftContent();if(!ha&&!ga)ga=l.createElement(r,null," ");return (l.createElement(t,{layerHideOnBlur:false,modal:true,shown:true,width:ba},l.createElement(v,{showCloseButton:false},l.createElement(w,{display:"block",shade:"medium",size:"medium",weight:"bold"},fa)),l.createElement(x,{height:aa,key:"cropViewerBody",messageText:this.isCropMode()?null:j.THUMBNAIL_MODE_EXPLANATION,photoData:this.state.photoData,photoid:this.props.photoid,profileID:this.props.profileID,ref:"zoomBody",savingMode:this.state.savingMode,setid:this.props.setid,uploadRequest:this.props.uploadRequest,width:ba}),l.createElement(u,{leftContent:ha},ga)));},getSaveButtonLabel:function(){if(!this.isCropMode()||!h.newSaveButtonLabel||(this.state.photoData&&this.state.photoData.previousprofilepic))return j.BUTTON_SAVE;return j.SAVE_AND_CROP;},renderFooterLeftContent:function(){var ea=this.state.photoData;if(!ea||this.props.uploadRequest||this.props.cropOnlyMode||this.state.savingMode||ea.previousprofilepic||!h.allowSkipCrop)return null;var fa,ga;if(this.isCropMode()){fa=j.SKIP_CROP;ga=j.SKIP_CROP_EXPLANATION;}else{fa=j.CROP_AND_SAVE;ga=j.CROP_EXPLANATION;}var ha=this.isCropMode()?ca.SET_THUMBNAIL:ca.CROP;return (l.createElement(r,null,l.createElement(q,{"aria-label":ga,className:"_4q_0","data-hover":"tooltip",onClick:this.handleModeChange.bind(this,ha)},fa)));},handleModeChange:function(ea){this.setState({mode:ea});if(ea===ca.SET_THUMBNAIL)this.refs.zoomBody.resetDimensions();},renderPublicWarning:function(ea){if(ea.isWorkUser)return null;return (l.createElement(p,l.__spread({className:"_3-90 _4q_1"},o.propsFor(j.PROFILE_PIC_VISIBILITY),{src:"/images/mobile/privacy/composer/token_public.png"})));},handleSaveClick:function(){if(this.isCropMode()){this.handleSave();}else this.handleSetThumbnailSave();},getCropArea:function(){return this.refs.zoomBody.getDimensionsArea();},getFlowType:function(){return k.flow.ZOOMCROP;},getPhotoSize:function(){return this.state.photoData.original;},isCropMode:function(){return this.state.mode===ca.CROP;},shouldGenThumbnailForReverts:function(){return this.refs.zoomBody.hasSpaceToDrag();}});e.exports=da;},null);
__d("ProfilePicCropViewerInit",["ProfilePictureFlowLogging","React"],function(a,b,c,d,e,f,g,h){var i='profile-picture-crop',j='loading',k=g.flow,l,m;function n(){m&&m.close();}function o(q,r,s){s=s||{};d(['SpotlightViewerInit','ZoomProfilePicCropViewer.react','PhotoStore','AsyncRequest','AsyncResponse','XProfilePicCropViewerAsyncControllerURIBuilder'],function(t,u,v,w,x,y){n();l=i+':'+q+':'+r;m=t.render(h.createElement(u,{open:true,method:s.method,photoid:q,profileID:r,setid:l,source:s.source,uploadRequest:s.uploadRequest,warnOnCancel:s.warnOnCancel,cropOnlyMode:s.cropOnlyMode,successCallback:s.successCallback,errorCallback:s.errorCallback,cancelCallback:s.cancelCallback}),function(){m=null;});if(v.hasBeenCreated(l)||q===j)return;var z=new y().setString('photo_id',q).setInt('profile_id',r).setString('set_id',l).getURI(),aa=l;new w(z).setErrorHandler(function(ba){aa===l&&n();x.defaultErrorHandler(ba);}).send();});return true;}var p={close:n,getFlowType:function(){return k.ZOOMCROP;},useCropViewer:function(){return true;},loading:function(q,r){o(j,q,r);},loadID:o};e.exports=p;},null);
__d("ProfilePicUploadToCrop",["FileInputUploader","JpegResizer","PhotosMimeType","ProfilePicCropViewerInit","ProfilePictureFlowLogging","tidyEvent"],function(a,b,c,d,e,f,g,h,i,j,k,l){function m(){return j.getFlowType();}function n(){k.setFlowType(m()).log(k.step.UPLOAD_SUCCESS);}function o(){k.setFlowType(m()).log(k.step.RESIZE_SKIPPED);}function p(q,r,s,t,u){"use strict";var v=r.getInput();if(!v.name)v.name='photo';this.$ProfilePicUploadToCrop0=null;if(h.isSupported())this.$ProfilePicUploadToCrop0=new h(1);l(r.subscribe('change',function(){if(!r.getValue())return;k.setFlowType(m()).log(k.step.UPLOAD_SELECT);u=String(u);var w=new g(v).setURI(q).setAllowCrossOrigin(true);j.loading(u,{uploadRequest:w});l([w.subscribe('success',function(x,y){r.clear();p.loadCropper(y.response.getPayload(),u,t);}),w.subscribe('failure',function(){r.clear();j.close();k.setFlowType(m()).log(k.step.FAIL);})]);if(this.$ProfilePicUploadToCrop0)w.setUploadInParallel(true).setPreprocessHandler(this.$ProfilePicUploadToCrop1.bind(this));w.send();}.bind(this)));}p.prototype.$ProfilePicUploadToCrop1=function(q,r){"use strict";k.setFlowType(m()).log(k.step.RESIZE_BEGIN);var s=q.getFile();if(!s||!i(s.type).isJpeg()){o();return r(q);}this.$ProfilePicUploadToCrop0.resizeBlob(s,function(t,u,v){if(t){k.setFlowType(m()).log(k.step.RESIZE_FAIL);return r(q);}if(v){o();}else{q.setFile(u);k.setFlowType(m()).log(k.step.RESIZE_SUCCESS);}r(q);});};p.loadCropper=function(q,r,s){"use strict";n();j.loadID(q.fbid,r,{warnOnCancel:true,source:s,method:'upload'});};e.exports=p;},null);
__d("ProfilePicDragAndDropUpload",["ProfilePicCropViewerInit","ProfilePictureFlowLogging","ProfilePicUploadToCrop","SinglePictureUploadTarget"],function(a,b,c,d,e,f,g,h,i,j){var k={init:function(l,m,n){var o=new j(l,m).setAllowCrossOrigin(true).setPreprocessCallback(function(){h.setFlowType(g.getFlowType()).log(h.step.DRAG_AND_DROP);g.loading(n,{uploadRequest:o});}).setAfterSuccessCallback(function(p){i.loadCropper(p,n,'timeline');}).activate();}};e.exports=k;},null);
__d("timeline-cover-dragdrop-edit",["SinglePictureUploadTarget","TimelineCover"],function(a,b,c,d,e,f,g,h){var i=function(){var m=h.getInstance();m.hideLoadingIndicator();},j=function(m){var n=h.getInstance(),o=m.id,p=m.photo_node;n.updateCoverImage(o,p);},k=function(m){h.getInstance().showLoadingIndicator();},l=function(m,n,o,p){new g(m,n).setAllowCrossOrigin(true).setMaximumDimensions(o,p).setPreprocessCallback(k).setOncompleteCallback(i).setAfterSuccessCallback(j).activate();};f.initialize_timeline_cover_drop_target=l;},null);