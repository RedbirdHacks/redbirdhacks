/*!CK:1720527954!*//*1422247136,*/

if (self.CavalryLogger) { CavalryLogger.start_js(["24cwq"]); }

__d("CollectionsAddNewHub",["AsyncRequest","AsyncResponse","Event","Form","Keys","TimelineSection","copyProperties"],function(a,b,c,d,e,f,g,h,i,j,k,l,m){var n={init:function(o,p,q,r,s){l.callWithSection(r,function(t){this.initImpl(o,p,q,r,s,t.getNode());}.bind(this));},initImpl:function(o,p,q,r,s,t){if(!o)return;var u=o.getCore();o.subscribe('select',function(w,x){if(!x.selected.type.match('addnew'))return;this.createHub(o,x.selected.orig_text||x.selected.text,p,q,r,s,t);}.bind(this));var v=o.getView();i.listen(u.getElement(),'keydown',function(event){if(i.getKeyCode(event)==k.RETURN&&!v.getSelection()){this.createHub(o,u.getValue(),p,q,r,s,t);event.kill();}}.bind(this));},createHub:function(o,p,q,r,s,t,u){var v=o.getCore();v.setEnabled(false);var w=function(){v.reset();v.getElement().blur();v.setEnabled(true);},x=m({title:p,type:q,root_id:u.id,results:o.getData().buildQueryResults(p)},j.serialize(t));new g(r).setData(x).setHandler(w).setErrorHandler(function(y){w();h.defaultErrorHandler(y);}).send();}};e.exports=n;},null);
__d("XCollectionRecommendationCarouselController",["XController"],function(a,b,c,d,e,f){e.exports=b("XController").create("\/timeline\/app_collection\/recommendation\/carousel\/",{collection_token:{type:"String",required:true},cursor:{type:"String",required:true},id:{type:"String",required:true},itemsize:{type:"Int",required:true},itemsperpage:{type:"Int",required:true},itemstooverfetch:{type:"Int",required:true},surface:{type:"String",required:true},surface_collection_id:{type:"Int",required:true}});},null);
__d("OGCollectionRecommendationCarousel",["Arbiter","AsyncRequest","CSS","DataStore","DOM","Event","Parent","PageLikeButton","XCollectionRecommendationCarouselController","csx","cx","tidyEvent"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r){var s='OGCollectionRecommendationCarousel',t={},u={};function v(da,ea,fa,ga){"use strict";this.$OGCollectionRecommendationCarousel0=ea;this.$OGCollectionRecommendationCarousel1=ga.collection_token;this.$OGCollectionRecommendationCarousel2=fa;this.$OGCollectionRecommendationCarousel3=ea.getNode().id;this.$OGCollectionRecommendationCarousel4=ga.surface;this.$OGCollectionRecommendationCarousel5=ga.surface_collection_id;this.$OGCollectionRecommendationCarousel6=da;this.$OGCollectionRecommendationCarousel7=ga.item_size;this.$OGCollectionRecommendationCarousel8=ga.items_per_page;this.$OGCollectionRecommendationCarousel9=ga.items_to_over_fetch;t[da]={carousel:ea,collectionToken:ga.collection_token};j.set(s,this.$OGCollectionRecommendationCarousel3,this);j.set(s,this.$OGCollectionRecommendationCarousel1,this);if(!fa){ea.endCarousel();return;}r([this.$OGCollectionRecommendationCarousel0.subscribe('needsitems',this.$OGCollectionRecommendationCarousela.bind(this))]);g.subscribe(n.LIKED,this.$OGCollectionRecommendationCarouselb.bind(this));g.subscribe(n.UNLIKED,this.$OGCollectionRecommendationCarouselc.bind(this));}v.prototype.$OGCollectionRecommendationCarousela=function(){"use strict";new h((o.getURIBuilder()).setString('collection_token',this.$OGCollectionRecommendationCarousel1).setString('cursor',this.$OGCollectionRecommendationCarousel2).setString('id',this.$OGCollectionRecommendationCarousel3).setInt('itemsize',this.$OGCollectionRecommendationCarousel7).setInt('itemsperpage',this.$OGCollectionRecommendationCarousel8).setInt('itemstooverfetch',this.$OGCollectionRecommendationCarousel9).setString('surface',this.$OGCollectionRecommendationCarousel4).setInt('surface_collection_id',this.$OGCollectionRecommendationCarousel5).getURI()).send();};v.prototype.$OGCollectionRecommendationCarouselb=function(da,ea){"use strict";var fa=m.byClass(ea.target,"_58rc");if(!fa)return;u[ea.profile_id]=fa;w(fa,true);var ga=m.byClass(fa,"_596n");if(ga&&this.$OGCollectionRecommendationCarousel6===ga.id)ca(ga.id);};v.prototype.$OGCollectionRecommendationCarouselc=function(da,ea){"use strict";var fa=u[ea.profile_id];if(!fa)return;w(fa,false);};v.prototype.$OGCollectionRecommendationCarousele=function(da,ea){"use strict";if(!ea||!da||da.length===0){this.$OGCollectionRecommendationCarousel0.endCarousel();return;}this.$OGCollectionRecommendationCarousel2=ea;this.$OGCollectionRecommendationCarousel0.addItems(da);};v.update=function(da,ea,fa){"use strict";var ga=j.get(s,fa);if(ga)ga.$OGCollectionRecommendationCarousele(da,ea);};v.removeItemFromRecommendations=function(da,ea){"use strict";return ba(da,ea);};v.plusRecommendation=function(da,ea,fa,ga,ha,ia){"use strict";var ja=t[ea];if(da!=ea&&ja){var ka=k.scry(ja.carousel.getNode(),'[data-obj="'+ga+'"]');if(ka&&ka.length>0){var la=m.byClass(ka[0],"_58rc");aa(ea,la);}}var ma=null;if(ia){ma=ba(da,fa);}else ma=y(da,fa);return {ignored_item_ids:ma};};v.postPlusRecommendation=function(da,ea){"use strict";var fa=v.getWrapperID(da,ea);ca(fa);};v.slideLeftOneUnitAfterAction=function(da){"use strict";ca(da);};v.getWrapperID=function(da,ea){"use strict";return 'recommendation_carousel_'+da+'_'+ea;};function w(da,ea){var fa=k.scry(da,"._vfm")[0],ga="_4rtx";if(fa)ea?i.addClass(fa,ga):i.removeClass(fa,ga);}function x(da){var ea=k.scry(da,"._3owb")[0];if(ea)return ea.getAttribute('data-obj');}function y(da,ea){var fa=[],ga=t[da].carousel.getVisibleNodes(),ha=x(ea);for(var ia=0;ia<ga.length;++ia){var ja=x(ga[ia]);if(ha===ja)break;if(ja)fa.push(ja);}return fa;}function z(da){i.addClass(da,"_42fn");var ea=l.listen(da,'mouseover',function(){i.removeClass(da,"_42fn");ea.remove();});}function aa(da,ea){if(ea){var fa=ea.nextSibling;fa&&z(fa);t[da].carousel.removeItem(ea);}t[da].carousel.refresh();}function ba(da,ea){var fa=y(da,ea);aa(da,ea);return fa;}function ca(da){var ea=t[da].carousel;if(ea){var fa=ea._carousel._grid.querySelector(':hover');ea.slide(1,300);var ga=fa.nextSibling;if(ga){i.addClass(ga,"_46lc");var ha=l.listen(ga,'mouseover',function(){i.removeClass(ga,"_46lc");ha.remove();});}}}e.exports=v;},null);
__d("OGCollectionRecommendationQuestionWrapper",["CSS","Event","Parent","OGCollectionRecommendationCarousel","copyProperties","cx","tidyEvent"],function(a,b,c,d,e,f,g,h,i,j,k,l,m){function n(o,p,q,r,s,t,u){"use strict";this.$OGCollectionRecommendationQuestionWrapper0=o;this.$OGCollectionRecommendationQuestionWrapper1=p;this.$OGCollectionRecommendationQuestionWrapper2=q;this.$OGCollectionRecommendationQuestionWrapper3=r;this.$OGCollectionRecommendationQuestionWrapper4=t;this.$OGCollectionRecommendationQuestionWrapper5=u;m(s.subscribe('answered',function(v,w){var x=i.byClass(this.$OGCollectionRecommendationQuestionWrapper4,'selected');if(w==='yes'){var y=this.$OGCollectionRecommendationQuestionWrapper3;if(this.$OGCollectionRecommendationQuestionWrapper5)y=j.getWrapperID(this.$OGCollectionRecommendationQuestionWrapper1,this.$OGCollectionRecommendationQuestionWrapper0);g.hide(x);var z=j.plusRecommendation(this.$OGCollectionRecommendationQuestionWrapper3,y,i.byClass(this.$OGCollectionRecommendationQuestionWrapper4,"_58rc"),this.$OGCollectionRecommendationQuestionWrapper2,this.$OGCollectionRecommendationQuestionWrapper0,this.$OGCollectionRecommendationQuestionWrapper5);return k(z,{collection_token:this.$OGCollectionRecommendationQuestionWrapper0,show_edit_menu:false,show_added_check:true});}else{var aa=j.slideLeftOneUnitAfterAction(this.$OGCollectionRecommendationQuestionWrapper3);g.addClass(x,"_2pbd");var ba=h.listen(x.parentNode,'mouseover',function(){g.removeClass(x,"_2pbd");ba.remove();});return {ignored_item_ids:aa,objectid:this.$OGCollectionRecommendationQuestionWrapper2};}}.bind(this)));}e.exports=n;},null);
__d("TimelineCollectionsCuration",["getContextualParent","CSS","Parent","$","cx"],function(a,b,c,d,e,f,g,h,i,j,k){var l={hideAppSection:function(m){var n=g(j(m),true),o=['getTimelineUnitFromChildElement','getMedleyAppSectionFromChildElement'];for(var p=0;p<o.length;p++){var q=l[o[p]](n);if(q)return h.hide(q);}},getTimelineUnitFromChildElement:function(m){return i.byClass(m,'fbTimelineUnit');},getMedleyAppSectionFromChildElement:function(m){return i.byClass(m,"_30f");}};e.exports=l;},null);
__d("OGCollectionAddToggle",["CSS","DOM","Event","TimelineCollectionsCuration","csx","cx","tidyEvent"],function(a,b,c,d,e,f,g,h,i,j,k,l,m){var n={},o="_91n";function p(r,s,t){g.conditionShow(r,t);g.conditionClass(s,o,t);}var q={initTypeaheadToggleInReport:function(r,s,t){h.prependContent(h.find(j.getTimelineUnitFromChildElement(r),"._5amu"),s);if(n[t]===(void 0)){n[t]=g.hasClass(s,o);}else p(r,s,n[t]);m(i.listen(s,'click',function(u){p(r,s,n[t]=!n[t]);}));}};e.exports=q;},null);
__d("CollectionSuggestionAddQuestion",["AsyncRequest","Event","TidyArbiterMixin","mixin","tidyEvent"],function(a,b,c,d,e,f,g,h,i,j,k){var l=j(i);for(var m in l)if(l.hasOwnProperty(m))o[m]=l[m];var n=l===null?null:l.prototype;o.prototype=Object.create(n);o.prototype.constructor=o;o.__superConstructor__=l;function o(p,q,r){"use strict";this.$CollectionSuggestionAddQuestion0=r;k(h.listen(p.yes,'click',this.handleClick.bind(this).bind(null,'yes',q.yes)));if(p.no)k(h.listen(p.no,'click',this.handleClick.bind(this).bind(null,'no',q.no)));if(p.want)k(h.listen(p.want,'click',this.handleClick.bind(this).bind(null,'want',q.want)));}o.prototype.handleClick=function(p,q){"use strict";var r=this.inform('answered',p);new g(q).setRelativeTo(this.$CollectionSuggestionAddQuestion0).setData(r).send();};e.exports=o;},null);
__d("EgoCollectionsRecommendation",["Arbiter","AsyncRequest","DOM","DOMClone","Tooltip","csx","isEmpty"],function(a,b,c,d,e,f,g,h,i,j,k,l,m){var n={},o={},p=1500;function q(t,u){new h(t).setHandler(function(v){if(!v.payload)return;var w=null;for(var x in u){if(!w){i.setContent(u[x],v.payload.icon);w=(u[x]).firstChild;}else i.setContent(u[x],w=j.shallowClone(w));k.set(w,v.payload.tooltip);}}).send();}function r(t,u,event,v){if(v.category!==t)return;var w=o[t];if(!m(w))setTimeout(q.bind(null,u,w),p);}var s={keepIconSynced:function(t,u,v){if(!n[v])n[v]=g.subscribe('AudienceSelector/syncNonSelectorIcon',r.bind(null,v,u));o[v]||(o[v]={});o[v][t.id]=t;},replaceOrInsertTopUnit:function(t,u){if(!t)return;var v=i.scry(t,'^.ego_unit_container')[0];if(!v)return;var w=i.scry(v,"._53ee");if(w[0]){i.replace(w[0],u);}else i.prependContent(v,u);}};e.exports=s;},null);