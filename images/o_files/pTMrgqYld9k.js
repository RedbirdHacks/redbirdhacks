/*!CK:2562676768!*//*1422245054,*/

if (self.CavalryLogger) { CavalryLogger.start_js(["obN+Q"]); }

__d("AdsTypeahead.react",["AdsHelpLink.react","AdsValidationIcon.react","AdsValidationIconType","BackgroundImage.react","React","ReactChildren","SearchableEntry","XUICloseButton.react","XUITypeahead.react","cx","joinClasses"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q){'use strict';var r=k.PropTypes,s=k.createClass({displayName:"AdsTypeahead",propTypes:{autoHighlight:r.bool,disabled:r.bool,errors:r.array,focusedOnInit:r.bool,onSelectAttempt:r.func,placeholder:r.string,searchSource:r.object.isRequired,selectedEntry:r.instanceOf(m)},getDefaultProps:function(){return {autoHighlight:true};},getInitialState:function(){var t=this.props.selectedEntry;return {queryString:this.props.selectedEntry?t.getTitle():'',focused:!!this.props.focusedOnInit};},componentWillReceiveProps:function(t){if('selectedEntry' in t)this.setState({queryString:t.selectedEntry?t.selectedEntry.getTitle():this.state.queryString});},focusInput:function(){this.setState({focused:true});this.refs.typeahead.focusInput();},render:function(){var t=null,u=null;if(this.props.selectedEntry){t=this.props.selectedEntry;u=this.props.selectedEntry.getPhoto();}var v=Array.isArray(this.props.errors)&&this.props.errors.length?k.createElement("span",{className:"_1fys"},k.createElement(h,{type:i.ERROR_WHITE,messages:this.props.errors})):null,w=q((("_1fyt")+(' '+"_1fyu")+(this.state.focused?' '+"_1fyv":'')+(!!v?' '+"_1fyw":'')),this.props.className),x=this.props.placeholder||'',y=!this.props.selectedEntry||!this.state.queryString,z=!!this.state.queryString&&!this.props.selectedEntry,aa=null;if(this.props.tooltipHelpText)aa=k.createElement("span",{className:"_1fyx"},k.createElement(g,null,this._getTooltipHelpText()));return (k.createElement("div",{className:w,title:x},k.createElement("div",{className:(("_1fyy")+(!!v?' '+"_1fyz":''))},v,k.createElement("div",{className:((this.props.disabled?"_1fy-":'')+(' '+"_1fy_")+(!!t?' '+"_1fz0":'')+(!!aa?' '+"_1fz1":'')+(!!u?' '+"_1fz2":''))},u&&this._renderPhoto(u),t&&this._renderClearEntry(),!t&&aa,k.createElement(o,{autoHighlight:this.props.autoHighlight,disabled:this.props.disabled,focusedOnInit:this.props.focusedOnInit,onBlur:this._onBlur,onChange:this._onChange,onFocus:this._onFocus,onSelectAttempt:this._onSelectAttempt,placeholder:x,queryString:this.state.queryString,ref:"typeahead",searchSource:this.props.searchSource,selectOnBlur:z,showEntriesOnFocus:y,viewStyle:"rich"}))),k.createElement("div",null,this.props.children)));},_renderPhoto:function(t){return (k.createElement(j,{className:"_1fz3",src:t,width:24,height:24,backgroundSize:"cover"}));},_renderClearEntry:function(){if(this.props.disabled)return null;return (k.createElement("div",{className:"_1fz4"},k.createElement(n,{onClick:this._onClearEntry})));},_getTooltipHelpText:function(){return l.map(this.props.tooltipHelpText,function(t,u){return k.createElement("p",{className:"_1fz5",key:u},t);});},_onChange:function(event){this.setState({queryString:event.target.value},this._didChange);},_didChange:function(){this.props.selectedEntry&&this.props.onSelectAttempt&&this.props.onSelectAttempt(null);},_onSelectAttempt:function(t){this.props.onSelectAttempt&&this.props.onSelectAttempt(t);},_onClearEntry:function(){this.setState({queryString:''},this._onClear);},_onClear:function(){this.refs.typeahead.focusInput();this.props.onSelectAttempt&&this.props.onSelectAttempt(null);},_onFocus:function(){this.setState({focused:true});},_onBlur:function(){this.setState({focused:false});}});e.exports=s;},null);
__d("XUIPagerButtons.react",["React","XUIButtonGroup.react","invariant"],function(a,b,c,d,e,f,g,h,i){var j=g.createClass({displayName:"XUIPagerButtons",render:function(){i(this.props.children.length===2);return (g.createElement(h,g.__spread({},this.props),this.props.children));}});e.exports=j;},null);
__d("AdsPEVideoThumbnailPicker.react",["LeftRight.react","React","Image.react","XUIButton.react","XUIPagerButtons.react","XUIText.react","clamp","cx","fbt","ix"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p){'use strict';var q=h.createClass({displayName:"AdsPEVideoThumbnailPicker",propTypes:{thumbnails:h.PropTypes.arrayOf(h.PropTypes.shape({id:h.PropTypes.string,uri:h.PropTypes.string.isRequired})).isRequired,onChange:h.PropTypes.func.isRequired,children:h.PropTypes.element,index:h.PropTypes.number.isRequired,title:h.PropTypes.string},_prevImage:function(){this._setImageIndex(this.props.index-1);},_nextImage:function(){this._setImageIndex(this.props.index+1);},_setImageIndex:function(r){r=m(0,r,this.props.thumbnails.length-1);if(r!==this.props.index)this.props.onChange(r,this.props.thumbnails[r]);},render:function(){if(!this.props.thumbnails.length)return null;var r=this.props.index,s=this.props.thumbnails[r].uri,t;if(this.props.children)t=(h.createElement("div",{className:"_w3"},this.props.children));return (h.createElement(g,{className:this.props.className,direction:g.DIRECTION.left},h.createElement("img",{className:"_w9",src:s,alt:this.props.title}),h.createElement("div",{className:"_wf"},h.createElement("div",{className:"_3-95"},h.createElement(k,null,h.createElement(j,{onClick:this._prevImage,image:h.createElement(i,{src:p('/images/ui/x/pager/left.png')}),type:"button"}),h.createElement(j,{onClick:this._nextImage,image:h.createElement(i,{src:p('/images/ui/x/pager/right.png')}),type:"button"})),h.createElement(l,{weight:"bold",className:"_3-9a"},o._("Thumbnail {selectThumbnailIndex} of {numThumbnails}",[o.param("selectThumbnailIndex",r+1),o.param("numThumbnails",this.props.thumbnails.length)]))),t)));}});e.exports=q;},null);
__d("BUIFormButton.react",["BUIForm.react","React","XUIButton.react","invariant"],function(a,b,c,d,e,f,g,h,i,j){'use strict';var k=h.createClass({displayName:"BUIFormButton",propTypes:Object.assign({},i.propTypes,{density:g.propTypes.density}),render:function(){var l=this.props,m=l.density,n=(function(p,q){var r={},s=Object.prototype.hasOwnProperty;if(p==null)throw new TypeError();for(var t in p)if(s.call(p,t)&&!s.call(q,t))r[t]=p[t];return r;})(l,{density:1}),o;switch(m){case 'breathy':case 'svelt':o='xlarge';break;case 'snug':o='large';break;case 'taut':o='medium';break;default:j(true);}return (h.createElement(i,h.__spread({},n,{size:o})));}});e.exports=k;},null);
__d("BUIFormTextInput.react",["BUIForm.react","BUITextInput.react","React","invariant"],function(a,b,c,d,e,f,g,h,i,j){'use strict';var k=i.createClass({displayName:"BUIFormTextInput",propTypes:Object.assign({},h.propTypes,{density:g.propTypes.density}),render:function(){var l=this.props,m=l.density,n=(function(p,q){var r={},s=Object.prototype.hasOwnProperty;if(p==null)throw new TypeError();for(var t in p)if(s.call(p,t)&&!s.call(q,t))r[t]=p[t];return r;})(l,{density:1}),o;switch(m){case 'breathy':case 'svelt':o='xtall';break;case 'snug':o='tall';break;case 'taut':o='short';break;default:j(true);}return (i.createElement(h,i.__spread({},n,{height:o})));}});e.exports=k;},null);
__d("DocumentMentionsRegex",[],function(a,b,c,d,e,f){var g='\\.,\\+\\*\\?\\$\\@\\|#{}\\(\\)\\^\\-\\[\\]\\\\\/!%\'"~=<>_:;',h='\\b[A-Z][^\\s'+g+']',i={PUNCTUATION:g,NAME:h};e.exports=i;},null);
__d("AtSignMentionsStrategy",["DocumentMentionsRegex"],function(a,b,c,d,e,f,g){var h=g.PUNCTUATION,i=['@','\\uff20'].join(''),j='[^'+i+h+'\\s]',k='(?:'+'\\.[ |$]|'+' |'+'['+h+']|'+')',l=new RegExp('(?:^|\\s)('+'['+i+']'+'((?:'+j+k+'){0,20})'+')$'),m={findMentionableString:function(n){var o=l.exec(n);if(o!==null){var p=o[2];if(p.length)return {matchingString:p,leadOffset:o[1].length};}return null;}};e.exports=m;},null);
__d("DocumentCompositeMentionsSource",["emptyFunction","invariant"],function(a,b,c,d,e,f,g,h){"use strict";function i(l,m,n){var o=n;while(m[o-1]===null)o--;return l.slice(o,n);}function j(l,m){var n=l.getCharacterList().toSeq().slice(0,m).reverse().takeWhile(function(o){return o.getEntity()===null;}).count();return l.getText().slice(m-n,m);}function k(l){h(l.length>0);this.$DocumentCompositeMentionsSource0=l;this.$DocumentCompositeMentionsSource1=false;this.$DocumentCompositeMentionsSource2=null;}k.prototype.bootstrap=function(l){if(this.$DocumentCompositeMentionsSource1)return;this.$DocumentCompositeMentionsSource1=true;l=l||g;var m=this.$DocumentCompositeMentionsSource0.length;function n(){m--;if(!m)l();}this.$DocumentCompositeMentionsSource0.forEach(function(o){o.bootstrap(n);});};k.prototype.search=function(l,m,n){this.$DocumentCompositeMentionsSource3(i(l.getText(),l.getEntities(),m),n);};k.prototype.searchWithImmutables=function(l,m,n){var o=m.getAnchorKey(),p=l.getBlockForKey(o);this.$DocumentCompositeMentionsSource3(j(p,m.getAnchorOffset()),n);};k.prototype.$DocumentCompositeMentionsSource3=function(l,m){var n=this.$DocumentCompositeMentionsSource0.length,o,p;for(var q=0;q<n;q++){o=this.$DocumentCompositeMentionsSource0[q];p=o.findMatch(l);if(p===null)continue;var r=p.matchingString;this.$DocumentCompositeMentionsSource2=r;o.search(r,function(s,t){if(this.$DocumentCompositeMentionsSource2===t)m(s,p.leadOffset);}.bind(this));return;}this.$DocumentCompositeMentionsSource2=null;m(null,null);};e.exports=k;},null);
__d("DocumentMentionsSource",["invariant"],function(a,b,c,d,e,f,g){function h(i,j){"use strict";g(typeof i.findMentionableString==='function');this.$DocumentMentionsSource0=i;this.$DocumentMentionsSource1=j;this.$DocumentMentionsSource2=false;}h.prototype.findMatch=function(i){"use strict";return this.$DocumentMentionsSource0.findMentionableString(i);};h.prototype.bootstrap=function(i){"use strict";if(!this.$DocumentMentionsSource2){this.$DocumentMentionsSource2=true;this.$DocumentMentionsSource1.bootstrap(i);}};h.prototype.search=function(i,j){"use strict";this.$DocumentMentionsSource1.search(i,j);};e.exports=h;},null);
__d("ProgressiveDateAndTimePicker.react",["InlineBlock.react","React","XUIProgressiveDatepicker.react","XUISelector.react","cx","fbt","formatDate"],function(a,b,c,d,e,f,g,h,i,j,k,l,m){var n=j.Option,o=h.createClass({displayName:"ProgressiveDateAndTimePicker",propTypes:Object.assign({},i.propTypes,{initialHour:h.PropTypes.number,initialMinute:h.PropTypes.number}),getDefaultProps:function(){return {initialHour:-1,initialMinute:-1,maxTime:Date.now()/1000,minTime:(new Date(1906,0,0,0,0)).getTime()/1000};},getInitialState:function(){return {datePickerResult:{year:this.props.initialYear,month:this.props.initialMonth,day:this.props.initialDay},hour:this.props.initialHour,minute:this.props.initialMinute};},onDateChange:function(p){this.setState({datePickerResult:p},this.onDateAndTimeChange);},onDateAndTimeChange:function(){if(!this.props.onDateAndTimeChange)return;var p=this.state.datePickerResult,q=Object.assign({},p,{hour:this.state.hour,minute:this.state.minute});this.props.onDateAndTimeChange(q);},onHourChange:function(event){this.onSelectorChange(event,'hour');},onMinuteChange:function(event){this.onSelectorChange(event,'minute');},onSelectorChange:function(event,p){var q=(event.target)?event.target.value:event.value,r={};r[p]=q;this.setState(r,this.onDateAndTimeChange);},render:function(){var p,q;if(this.state.datePickerResult.day){var r=[h.createElement(n,{key:-1,value:-1},"Hour:")];for(var s=0;s<24;s++){var t=new Date();t.setHours(s);var u=m(t,'g A');r.push(h.createElement(n,{key:s,value:s},u));}p=h.createElement(j,{className:"_5vu1",disabled:!this.state.datePickerResult.day,maxheight:this.props.menuMaxHeight,name:this.props.inputPrefix+'_hour',onChange:this.onHourChange,value:this.state.hour},r);}if(this.state.hour!=-1){var v=[h.createElement(n,{key:-1,value:-1},"Minute:")];for(s=0;s<60;s+=10){var w='00';if(s>0)w=s;v.push(h.createElement(n,{key:s,value:s},w));}q=h.createElement(j,{className:"_5vu1",disabled:this.state.hour==-1,maxheight:this.props.menuMaxHeight,name:this.props.inputPrefix+'_minute',onChange:this.onMinuteChange,value:this.state.minute},v);}return (h.createElement(g,{className:this.props.className},h.createElement(i,h.__spread({},this.props,{onDateChange:this.onDateChange})),p,q));}});e.exports=o;},null);
__d("VideoEditCaptions.react",["React","VideoMultiCaptionFileInput.react"],function(a,b,c,d,e,f,g,h){var i=g.createClass({displayName:"VideoEditCaptions",propTypes:{captions:g.PropTypes.object},getDefaultProps:function(){return {captions:[]};},render:function(){var j=this.props.captions,k,l=[],m={};for(var n in j){var o=j[n];if(o.is_default)k=o.locale;l.push(o.locale);m[o.locale]=o.locale_name;}return (g.createElement("div",{className:this.props.className},g.createElement(h,{defaultLocale:k,initialLocales:l,localesMap:m})));}});e.exports=i;},null);
__d("VideoEditLogger",["BanzaiLogger"],function(a,b,c,d,e,f,g){var h={logEvent:function(i,j){g.log('VideoEditLoggerConfig',{event:i,video_id:parseInt(j,10)});}};e.exports=h;},null);
__d("VideoEditForm.react",["AdsPEVideoThumbnailPicker.react","AdsTypeahead.react","AtSignMentionsStrategy","BUIForm.react","BUIFormButton.react","BUIFormTextInput.react","ComposedEntityMutability","ComposedEntityType","DocumentCompositeMentionsSource","DocumentEntity","DocumentMentionsSource","DOMContainer.react","InlineBlock.react","InputLabel.react","MentionsInput.Experimental.react","MentionsInputTypeaheadView.react","ProgressiveDateAndTimePicker.react","React","SearchableEntry","VideoEditCaptions.react","VideoEditEvents","VideoEditLogger","XUICheckboxInput.react","XUINotice.react","XUITokenizer.react","createEditorStateWithEntities","createEmptyEditorState","cx","fbt","getMentionsInputDecorator","getMentionsTextForContentState"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,aa,ba,ca,da,ea,fa,ga,ha,ia,ja,ka){var la=j.Element,ma=j.Section,na=x.createClass({displayName:"VideoEditForm",propTypes:{canBackdate:x.PropTypes.bool,canFeature:x.PropTypes.bool,canPreview:x.PropTypes.bool,canTag:x.PropTypes.bool,captions:x.PropTypes.object,deleteDialogURI:x.PropTypes.object,description:x.PropTypes.object,error:x.PropTypes.object,isEncoding:x.PropTypes.bool,locationEntry:x.PropTypes.object,mentionsSearchSource:x.PropTypes.object,notifyWhenProcessed:x.PropTypes.bool,placesSearchSource:x.PropTypes.object,preferredThumbnailIndex:x.PropTypes.number,previewMarkup:x.PropTypes.object,privacySelector:x.PropTypes.object,privacyDescription:x.PropTypes.string,showCaptions:x.PropTypes.bool,tags:x.PropTypes.array,tagsSearchSource:x.PropTypes.object,thumbnails:x.PropTypes.array,title:x.PropTypes.string,videoID:x.PropTypes.string,videoPermalink:x.PropTypes.string},componentDidMount:function(){ba.logEvent(aa.JS_LOADED,this.props.videoID);},getInitialState:function(){var oa=new q(i,this.props.mentionsSearchSource),pa=new o([oa]),qa=this.props.description,ra;if(qa){ra=fa({text:qa.text,ranges:qa.ranges,decorator:ja(),entityCreationFn:function(sa){return p.create(n.MENTION,m.IMMUTABLE,{id:sa.id,isWeak:sa.weakreference});}});}else ra=ga(ja());return {compositeMentionsSource:pa,editorState:ra,locationEntry:this.props.locationEntry?new y(this.props.locationEntry):null,tags:this.props.tags||[],title:this.props.title,thumbnailIndex:this.props.preferredThumbnailIndex-1};},onTitleChange:function(event){this.setState({title:event.target.value});},onDescriptionChange:function(oa){this.setState({editorState:oa});},onLocationSelectAtempt:function(oa){this.setState({locationEntry:oa});},getDateTimeKey:function(oa){return 'initial'+oa.charAt(0).toUpperCase()+oa.slice(1);},onAddTagAttempt:function(oa){var pa=this.state.tags,qa=pa.indexOf(oa);if(qa>=0)return;pa.push(oa);this.setState({tags:pa});},onRemoveTagAttempt:function(oa){var pa=this.state.tags,qa=pa.indexOf(oa);if(qa>=0)pa.splice(qa,1);this.setState({tags:pa});},onThumbnailPickerChange:function(oa){this.setState({thumbnailIndex:oa});},renderTaggerSection:function(){var oa=this.state.tags.map(function(qa){return qa.getUniqueID();}),pa=oa.join(',');return (x.createElement(ma,{key:"taggerSection"},x.createElement(la,{label:"In this video",infoText:"Tag people who appear in this video."},x.createElement(ea,{className:"_2dlh",entries:this.state.tags,onAddEntryAttempt:this.onAddTagAttempt,onRemoveEntryAttempt:this.onRemoveTagAttempt,searchSource:this.props.tagsSearchSource}),x.createElement("input",{type:"hidden",name:"tags",value:pa}))));},getPlaceInputKeyAndValue:function(){var oa=this.state.locationEntry,pa='place_id',qa=oa?oa.getUniqueID():null;if(oa&&!qa){pa='place_name';qa=oa.getTitle();}return {key:pa,value:qa};},renderDetailsSection:function(){var oa=this.getPlaceInputKeyAndValue();return (x.createElement(ma,{key:"detailsSection"},x.createElement(la,{label:"Title"},x.createElement(l,{className:"_2dli",onChange:this.onTitleChange,value:this.state.title,name:"title"})),this.renderThumbnailsFormElement(),x.createElement(la,{label:"Where"},x.createElement(h,{className:"_32bi",autoHighlight:false,placeholder:"Where was this video taken?",selectedEntry:this.state.locationEntry,onSelectAttempt:this.onLocationSelectAtempt,searchSource:this.props.placesSearchSource}),x.createElement("input",{type:"hidden",name:oa.key,value:oa.value})),this.renderBackdateFormElement(),x.createElement(la,{label:"Description"},x.createElement(u,{mentionsSource:this.state.compositeMentionsSource,className:"_3smg",editorState:this.state.editorState,typeaheadView:v,typeaheadViewProps:{},onChange:this.onDescriptionChange}),x.createElement("input",{type:"hidden",name:"description",value:ka(this.state.editorState.getCurrentContent())})),this.renderCaptionsFormElement(),x.createElement(la,{label:"Privacy",infoText:this.props.privacyDescription},x.createElement(s,{className:"_32bj"},x.createElement(r,null,this.props.privacySelector)))));},renderBackdateFormElement:function(){if(!this.props.canBackdate)return x.createElement("div",null);var oa={};for(var pa in this.props.backdatedTime){var qa=this.getDateTimeKey(pa);oa[qa]=parseInt(this.props.backdatedTime[pa],10);}return (x.createElement(la,{label:"When"},x.createElement(w,x.__spread({className:"_32bj"},oa,{inputPrefix:"backtime",descendingYears:true}))));},renderCaptionsFormElement:function(){if(!this.props.showCaptions)return x.createElement("div",null);return (x.createElement(la,{label:"Captions",infoText:"Upload your .SRT caption file using this format: filename.en_US.srt"},x.createElement(z,{className:"_2dlj",captions:this.props.captions})));},renderThumbnailsFormElement:function(){if(this.props.isEncoding)return x.createElement("div",null);return (x.createElement(la,{label:"Thumbnail"},x.createElement(g,{thumbnails:this.props.thumbnails,onChange:this.onThumbnailPickerChange,index:this.state.thumbnailIndex,title:"Choose a Thumbnail"}),x.createElement("input",{type:"hidden",name:"preferred_thumbnail_index",value:this.state.thumbnailIndex+1})));},renderActionsSection:function(){return (x.createElement(ma,{key:"actionsSection"},x.createElement("div",{className:"_59__ mvl"},x.createElement(k,{href:this.props.videoPermalink,label:"Cancel"}),x.createElement(k,{href:this.props.deleteDialogURI,label:"Delete",rel:"dialog"}),x.createElement(k,{label:"Save",use:"confirm"}))));},renderError:function(){if(!this.props.error)return null;return (x.createElement(da,{use:"warn"},x.createElement(r,null,this.props.error)));},renderEncodingNotice:function(){if(!this.props.isEncoding)return null;return (x.createElement(da,{use:"notify"},x.createElement("h1",null,"This video is currently processing"),"You can edit its details here, but you won't be able to choose a thumbnail until processing is complete.",x.createElement(t,null,x.createElement(ca,{name:"alert_when_done",defaultChecked:this.props.notifyWhenProcessed}),x.createElement("label",null,"Notify me when my video is done processing"))));},renderPreviewSection:function(){var oa=this.props.canFeature?'':"Trailer",pa=this.props.canFeature?null:"Mark this video as a trailer to have it show up as a preview for your page in various places on Facebook. You can only have one video marked as a trailer at a time.";return (x.createElement(ma,{key:"previewSection"},x.createElement(la,{label:oa,infoText:pa},x.createElement(r,null,this.props.previewMarkup))));},render:function(){var oa=[];if(this.props.canTag)oa.push(this.renderTaggerSection());oa.push(this.renderDetailsSection());if(this.props.canFeature||this.props.canPreview)oa.push(this.renderPreviewSection());oa.push(this.renderActionsSection());return (x.createElement("div",null,this.renderError(),this.renderEncodingNotice(),x.createElement(j,{className:"_3slc"},oa)));}});e.exports=na;},null);