/*!CK:3155990256!*//*1420436552,*/

if (self.CavalryLogger) { CavalryLogger.start_js(["6hUTv"]); }

__d("PlaceTagType",[],function(a,b,c,d,e,f){e.exports={CITY:"city",STATE_PROVINCE:"state_province",COUNTRY:"country",PLACE:"place",EVENT:"event",RESIDENCE:"residence",TEXT:"text"};},null);
__d("PlacesDataSource",["DataSource"],function(a,b,c,d,e,f,g){for(var h in g)if(g.hasOwnProperty(h))j[h]=g[h];var i=g===null?null:g.prototype;j.prototype=Object.create(i);j.prototype.constructor=j;j.__superConstructor__=g;function j(k){"use strict";g.call(this,k);this._origBootstrapEndpoint=this.bootstrapEndpoint;}j.prototype.shouldFetchMoreResults=function(k){"use strict";if(this.queryData.new_js_ranking){return true;}else return i.shouldFetchMoreResults.call(this,k);};j.prototype.mergeUids=function(k,l,m,n){"use strict";if(this.queryData.new_js_ranking){this._checkExtendedMatch(n,k);return this.deduplicateByKey(m.concat(l,k));}else return i.mergeUids.call(this,k,l,m,n);};j.prototype.resetBootstrapEndpoint=function(k){"use strict";this.setBootstrapEndpoint(this._origBootstrapEndpoint,k);return this;};j.prototype.setBootstrapEndpoint=function(k,l){"use strict";if(this.bootstrapEndpoint!==k){this.bootstrapEndpoint=k;if(this._bootstrapped||this._bootstrapping)l=true;}if(l)this.dirty().bootstrap();return this;};j.prototype.getQueryEndpoint=function(){"use strict";return this.queryEndpoint;};j.prototype.getBootstrapData=function(){"use strict";return this.bootstrapData;};e.exports=j;},null);
__d("PlaceUtils",["PlaceTagType"],function(a,b,c,d,e,f,g){var h={placesClose:function(i,j,k,l){i=i||0;j=j||0;k=k||0;l=l||0;return (Math.abs(i-k)<1e-05)&&(Math.abs(j-l)<1e-05);},isNonSpecificPlace:function(i){return (i==g.CITY||i==g.STATE_PROVINCE||i==g.COUNTRY);}};e.exports=h;},null);
__d("PlacesTypeaheadCore",["Arbiter","CSS","Focus","Run","StickyPlaceholderInput","Style","TypeaheadCore","copyProperties"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n){for(var o in m)if(m.hasOwnProperty(o))q[o]=m[o];var p=m===null?null:m.prototype;q.prototype=Object.create(p);q.prototype.constructor=q;q.__superConstructor__=m;function q(){"use strict";if(m!==null)m.apply(this,arguments);}q.prototype.init=function(r,s,t){"use strict";p.init.call(this,r,s,t);this.arbiterTokens=[g.subscribe('Places/PlaceCreationCancel'+this.callbackID,function(u,v){this.view.allowPlaceCreation=false;this.view.allowFreeformOption=true;this.view.reset();this.focusElement();}.bind(this))];j.onLeave(function(){this.arbiterTokens.forEach(g.unsubscribe);}.bind(this));this._typeaheadID=t.id;this._citySet=false;this.data.subscribe('fetchComplete',this.update.bind(this));};q.prototype.initToggle=function(){"use strict";var r=this.root.parentNode,s=l.get(r,'position')!='static'?r:this.root,t=this.view,u='PlacesTypeaheadFocused';this.subscribe('focus',function(){t.show();h.addClass(s,u);});this.subscribe('blur',function(){t.hide();h.removeClass(s,u);});};q.prototype.focusElement=function(){"use strict";i.set(this.element);this.value='';this.checkValue();};q.prototype.setValue=function(r){"use strict";p.setValue.call(this,r);k.update(this.element);};q.prototype.updateDataSource=function(r){"use strict";this.data.setQueryData({city_id:this._cityId,city_set:this._citySet});this.data.setBootstrapData({city_id:this._cityId});if(r){this.data.dirty();this.data.bootstrap();}};q.prototype.setCity=function(r,s){"use strict";this._citySet=s;if(this._cityId!==r){this._cityId=r;this.updateDataSource(s);}};q.prototype.update=function(r,s){"use strict";var t=s.response;if(!t)return;var u=t.getPayload();if(u.cityId)if(!this._citySet)this.setCity(u.cityId,false);};q.prototype.setLocation=function(r){"use strict";if(!r||!r.latitude||!r.longitude)return;this.data.setQueryData({latitude:r.latitude,longitude:r.longitude});this.data.setBootstrapData({latitude:r.latitude,longitude:r.longitude});this.data.resetBootstrapEndpoint(true);};n(q.prototype,{resetOnKeyup:false});e.exports=q;},null);
__d("PlacesTypeaheadBehavior",["CSS","DOM"],function(a,b,c,d,e,f,g,h){var i={init:function(j,k){j.subscribe(['reset','select','highlight'],function(l,m){if(l==='highlight'&&m.index!==-1&&m.selected.type!='freeform'&&m.selected.map&&!m.selected.changeCity){h.setContent(k,m.selected.map);g.show(k);}else g.hide(k);});}};e.exports=i;},null);
__d("NoTrucatingCompactTypeaheadRenderer",["CompactTypeaheadRenderer"],function(a,b,c,d,e,f,g){function h(i,j){return g(i,j);}h.className='noTrucating compact';e.exports=h;},null);
__d("PlacesTypeaheadView",["Arbiter","CSS","Dialog","DOM","Parent","Run","ScrollableArea","Style","TypeaheadView","copyProperties","fbt"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q){for(var r in o)if(o.hasOwnProperty(r))t[r]=o[r];var s=o===null?null:o.prototype;t.prototype=Object.create(s);t.prototype.constructor=t;t.__superConstructor__=o;function t(){"use strict";if(o!==null)o.apply(this,arguments);}t.prototype.init=function(){"use strict";this.content=j.find(this.element,'div.PlacesTypeaheadViewList');s.init.call(this);this.subscribe(['render','reset'],this.renderBorders.bind(this));this.arbiterTokens=[g.subscribe('Places/PlaceCreated'+this.callbackID,function(u,v){var w={text:v.name,rawtext:v.name,uid:v.fbid,city_id:v.city_id,city_name:v.city_name,city_page_id:v.city_page_id};this.inform('select',{index:-1,clicked:true,selected:w});this.inform('afterSelect');}.bind(this))];this.arbiterTokens.push(g.subscribe('Events/autoSuggestionSelected',function(u,v){this.inform('select',{index:-1,clicked:true,selected:{text:v.event_name,rawtext:v.event_name,uid:v.event_fbid}});this.inform('afterSelect');}.bind(this)));l.onLeave(function(){this.arbiterTokens.forEach(g.unsubscribe);}.bind(this));};t.prototype.renderBorders=function(){"use strict";h.conditionClass(this.element,'PlacesTypeaheadViewPopulated',this.items.length);};t.prototype.show=function(){"use strict";s.show.call(this);if(!this.results||!this.results.length)n.set(this.element,'height',0);};t.prototype.render=function(u,v,w){"use strict";v.forEach(function(aa){aa.value=u;});if(this.allowFreeformOption&&u&&(!v||v.length===0||v[v.length-1].type!='freeform')){var x=q._("Just use \"{custom_location}\"",[q.param("custom_location",u)]);v.push({uid:'0',rawtext:u,text:x,type:'freeform'});}if(this.allowPlaceCreation&&u&&(!v||v.length===0||v[v.length-1].type!='placecreate')){var y=q._("Add place \"{custom_location}\"",[q.param("custom_location",u)]);v.push({uid:'0',rawtext:u,text:y,type:'placecreate'});}s.render.call(this,u,v,w);this.element.style.visibility='hidden';if(this.visible&&this.results&&this.results.length)n.set(this.element,'height','');var z=m.getInstance(this.content);z&&z.adjustGripper();this.inform('afterRender',v);this.element.style.visibility='';};t.prototype.select=function(u){"use strict";var v=this.index,w=this.results[v];if(w){if(w.type==='placecreate'){i.bootstrap('/ajax/places/create/dialog.php',{name:w.rawtext,callback_id:this.callbackID});return;}if(w.type==='freeform')w.text=w.rawtext;s.select.call(this,u);}};t.prototype.next=function(){"use strict";s.next.call(this);this._scrollIntoView(this.selected);};t.prototype.prev=function(){"use strict";s.prev.call(this);this._scrollIntoView(this.selected);};t.prototype._scrollIntoView=function(u){"use strict";if(!k.byClass(u,'uiScrollableArea'))return;this.ignoreNextMouseover=true;var v=k.byClass(u,'uiScrollableAreaWrap'),w=u.offsetTop-v.offsetTop;if(w<v.scrollTop){v.scrollTop=w;return;}var x=w+u.offsetHeight;if(x>v.scrollTop+v.offsetHeight)v.scrollTop=x-v.offsetHeight;};t.prototype.mouseover=function(event){"use strict";this.ignoreNextMouseover||s.mouseover.call(this,event);this.ignoreNextMouseover=false;};t.prototype.highlight=function(u){"use strict";s.highlight.call(this,u,true);};p(t.prototype,{ignoreNextMouseover:false});e.exports=t;},null);
__d("legacy:PreventSubmitOnEnterTypeaheadBehavior",["TypeaheadPreventSubmitOnEnter"],function(a,b,c,d,e,f,g){if(!a.TypeaheadBehaviors)a.TypeaheadBehaviors={};a.TypeaheadBehaviors.preventSubmitOnEnter=function(h){h.enableBehavior(g);};},3);
__d("legacy:ShowResultsOnFocusTypeaheadBehavior",["TypeaheadShowResultsOnFocus"],function(a,b,c,d,e,f,g){if(!a.TypeaheadBehaviors)a.TypeaheadBehaviors={};a.TypeaheadBehaviors.showResultsOnFocus=function(h){h.enableBehavior(g);};},3);